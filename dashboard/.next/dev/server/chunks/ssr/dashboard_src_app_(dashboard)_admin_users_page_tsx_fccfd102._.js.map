{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/karim-f/Code/nivostack-monorepo-checkout/dashboard/src/app/%28dashboard%29/admin/users/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useAuth } from '@/components/AuthProvider'\nimport { api } from '@/lib/api'\n\ntype User = {\n  id: string\n  email: string\n  name: string | null\n  isAdmin: boolean\n  createdAt: string\n  subscription: {\n    id: string\n    status: string\n    enabled: boolean\n    plan: {\n      displayName: string\n      price: number\n    }\n    trialEndDate: string\n  } | null\n  _count: {\n    projects: number\n  }\n}\n\nexport default function AdminUsersPage() {\n  const { token } = useAuth()\n  const [users, setUsers] = useState<User[]>([])\n  const [loading, setLoading] = useState(true)\n  const [search, setSearch] = useState('')\n  const [statusFilter, setStatusFilter] = useState<string>('all')\n\n  useEffect(() => {\n    if (!token) return\n\n    api.admin.getUsers(token)\n      .then((data) => {\n        setUsers(data.users || [])\n        setLoading(false)\n      })\n      .catch(() => {\n        setLoading(false)\n      })\n  }, [token])\n\n  const filteredUsers = users.filter((user) => {\n    const matchesSearch = \n      user.email.toLowerCase().includes(search.toLowerCase()) ||\n      (user.name && user.name.toLowerCase().includes(search.toLowerCase()))\n    \n    if (statusFilter === 'all') return matchesSearch\n    if (statusFilter === 'admin') return matchesSearch && user.isAdmin\n    if (!user.subscription) return false\n    \n    if (statusFilter === 'active') {\n      return matchesSearch && user.subscription.enabled && user.subscription.status === 'active'\n    }\n    if (statusFilter === 'expired') {\n      return matchesSearch && user.subscription.status === 'expired'\n    }\n    if (statusFilter === 'disabled') {\n      return matchesSearch && !user.subscription.enabled\n    }\n    \n    return matchesSearch\n  })\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-gray-400\">Loading users...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-white mb-2\">Users Management</h1>\n        <p className=\"text-gray-400\">View and manage all registered users</p>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-gray-900 rounded-lg p-4 flex flex-col md:flex-row gap-4\">\n        <input\n          type=\"text\"\n          placeholder=\"Search by email or name...\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n          className=\"flex-1 px-4 py-2 bg-gray-800 border border-gray-700 rounded text-white placeholder-gray-500\"\n        />\n        <select\n          value={statusFilter}\n          onChange={(e) => setStatusFilter(e.target.value)}\n          className=\"px-4 py-2 bg-gray-800 border border-gray-700 rounded text-white\"\n        >\n          <option value=\"all\">All Users</option>\n          <option value=\"active\">Active</option>\n          <option value=\"expired\">Expired</option>\n          <option value=\"disabled\">Disabled</option>\n          <option value=\"admin\">Admins</option>\n        </select>\n      </div>\n\n      {/* Users Table */}\n      <div className=\"bg-gray-900 rounded-lg overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-800\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">User</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Subscription</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Status</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Projects</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Registered</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-800\">\n              {filteredUsers.map((user) => (\n                <tr key={user.id} className=\"hover:bg-gray-800/50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div>\n                      <div className=\"text-sm font-medium text-white\">\n                        {user.email}\n                        {user.isAdmin && (\n                          <span className=\"ml-2 px-2 py-0.5 text-xs bg-purple-600/20 text-purple-400 rounded\">Admin</span>\n                        )}\n                      </div>\n                      {user.name && (\n                        <div className=\"text-sm text-gray-400\">{user.name}</div>\n                      )}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    {user.subscription ? (\n                      <div>\n                        <div className=\"text-sm text-white\">{user.subscription.plan.displayName}</div>\n                        <div className=\"text-xs text-gray-400\">\n                          ${user.subscription.plan.price === 0 ? 'Free' : user.subscription.plan.price.toFixed(2)}/mo\n                        </div>\n                      </div>\n                    ) : (\n                      <span className=\"text-sm text-gray-500\">No subscription</span>\n                    )}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    {user.subscription ? (\n                      <div>\n                        <span className={`px-2 py-1 text-xs rounded ${\n                          !user.subscription.enabled\n                            ? 'bg-red-900/30 text-red-400'\n                            : user.subscription.status === 'active'\n                            ? 'bg-green-900/30 text-green-400'\n                            : 'bg-yellow-900/30 text-yellow-400'\n                        }`}>\n                          {!user.subscription.enabled\n                            ? 'Disabled'\n                            : user.subscription.status === 'active'\n                            ? 'Active'\n                            : user.subscription.status}\n                        </span>\n                      </div>\n                    ) : (\n                      <span className=\"text-sm text-gray-500\">-</span>\n                    )}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">\n                    {user._count.projects}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-400\">\n                    {new Date(user.createdAt).toLocaleDateString()}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        {filteredUsers.length === 0 && (\n          <div className=\"text-center py-12 text-gray-400\">\n            No users found\n          </div>\n        )}\n      </div>\n\n      <div className=\"text-sm text-gray-400\">\n        Showing {filteredUsers.length} of {users.length} users\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}}]
}