{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/karim-f/Code/nivostack-monorepo-checkout/dashboard/src/lib/api.ts"],"sourcesContent":["const API_BASE = process.env.NEXT_PUBLIC_APP_URL || ''\n\n// Common pagination types\nexport interface PaginationParams {\n  page?: number\n  limit?: number\n  sortBy?: string\n  sortOrder?: 'asc' | 'desc'\n}\n\nexport interface PaginationResponse {\n  page: number\n  limit: number\n  total: number\n  totalPages: number\n  hasNext: boolean\n  hasPrev: boolean\n}\n\ntype FetchOptions = {\n  method?: string\n  body?: unknown\n  token?: string\n  headers?: Record<string, string>\n}\n\nasync function fetchApi<T>(endpoint: string, options: FetchOptions = {}): Promise<T> {\n  const { method = 'GET', body, token, headers: customHeaders } = options\n\n  const headers: Record<string, string> = {}\n\n  // Don't set Content-Type for FormData (browser will set it with boundary)\n  if (!(body instanceof FormData)) {\n    headers['Content-Type'] = 'application/json'\n  }\n\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`\n  }\n\n  // Merge custom headers\n  if (customHeaders) {\n    Object.assign(headers, customHeaders)\n  }\n\n  const res = await fetch(`${API_BASE}${endpoint}`, {\n    method,\n    headers,\n    body: body instanceof FormData ? body : (body ? JSON.stringify(body) : undefined)\n  })\n\n  const data = await res.json()\n\n  if (!res.ok) {\n    const errorMessage = data.error || `HTTP ${res.status}: ${res.statusText}`\n    const errorDetails = data.details ? `\\nDetails: ${data.details}` : ''\n    throw new Error(`${errorMessage}${errorDetails}`)\n  }\n\n  return data\n}\n\nexport const api = {\n  auth: {\n    login: (email: string, password: string) =>\n      fetchApi<{ user: { id: string; email: string; name: string }; token: string }>(\n        '/api/auth/login',\n        { method: 'POST', body: { email, password } }\n      ),\n    register: (email: string, password: string, name?: string) =>\n      fetchApi<{ user: { id: string; email: string; name: string }; token: string }>(\n        '/api/auth/register',\n        { method: 'POST', body: { email, password, name } }\n      )\n  },\n  plans: {\n    list: () =>\n      fetchApi<{ plans: Array<{\n        id: string;\n        name: string;\n        displayName: string;\n        description: string | null;\n        price: number;\n        currency: string;\n        interval: string;\n        maxProjects: number | null;\n        maxDevices: number | null;\n        maxApiTraces: number | null;\n        maxApiEndpoints: number | null;\n        maxApiRequests: number | null;\n        maxLogs: number | null;\n        maxSessions: number | null;\n        maxCrashes: number | null;\n        maxBusinessConfigKeys: number | null;\n        maxLocalizationLanguages: number | null;\n        maxLocalizationKeys: number | null;\n        retentionDays: number | null;\n        allowCustomDomains: boolean;\n        allowWebhooks: boolean;\n        allowTeamMembers: boolean;\n        allowPrioritySupport: boolean;\n        isActive: boolean;\n      }> }>(\n        '/api/plans'\n      )\n  },\n  projects: {\n    list: (token: string) =>\n      fetchApi<{ projects: Array<{ id: string; name: string; apiKey: string; createdAt: string; _count: { devices: number; logs: number; crashes: number; apiTraces: number } }> }>(\n        '/api/projects',\n        { token }\n      ),\n    create: (name: string, token: string) =>\n      fetchApi<{ project: { id: string; name: string; apiKey: string } }>(\n        '/api/projects',\n        { method: 'POST', body: { name }, token }\n      ),\n    update: (projectId: string, name: string, token: string) =>\n      fetchApi<{ project: { id: string; name: string; apiKey: string } }>(\n        `/api/projects/${projectId}`,\n        { method: 'PATCH', body: { name }, token }\n      ),\n    delete: (projectId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/projects/${projectId}`,\n        { method: 'DELETE', token }\n      )\n  },\n  devices: {\n    list: (projectId: string, token: string, params?: {\n      platform?: string;\n      startDate?: string;\n      endDate?: string;\n      search?: string;\n      debugMode?: string;\n      deviceCategory?: string;\n      deviceBrand?: string;\n      language?: string;\n      page?: number;\n      limit?: number;\n      sortBy?: string;\n      sortOrder?: string;\n    }) =>\n      fetchApi<{\n        devices: Array<{\n          id: string;\n          deviceId: string;\n          platform: string;\n          osVersion: string;\n          appVersion: string;\n          model: string;\n          manufacturer: string;\n          metadata: Record<string, unknown> | null;\n          lastSeenAt: string;\n          createdAt: string;\n          // Device debug mode fields\n          deviceCode?: string;\n          userId?: string;\n          userEmail?: string;\n          userName?: string;\n          debugModeEnabled?: boolean;\n          debugModeEnabledAt?: string;\n          debugModeExpiresAt?: string;\n          debugModeEnabledBy?: string;\n        }>;\n        stats: {\n          total: number;\n          android: number;\n          ios: number;\n          today: number;\n          thisWeek: number;\n          thisMonth: number;\n          debugModeCount: number;\n        };\n        pagination: PaginationResponse;\n      }>(\n        `/api/devices?projectId=${projectId}${params?.platform ? `&platform=${params.platform}` : ''}${params?.startDate ? `&startDate=${params.startDate}` : ''}${params?.endDate ? `&endDate=${params.endDate}` : ''}${params?.search ? `&search=${encodeURIComponent(params.search)}` : ''}${params?.debugMode ? `&debugMode=${params.debugMode}` : ''}${params?.deviceCategory ? `&deviceCategory=${encodeURIComponent(params.deviceCategory)}` : ''}${params?.deviceBrand ? `&deviceBrand=${encodeURIComponent(params.deviceBrand)}` : ''}${params?.language ? `&language=${encodeURIComponent(params.language)}` : ''}${params?.page ? `&page=${params.page}` : ''}${params?.limit ? `&limit=${params.limit}` : ''}${params?.sortBy ? `&sortBy=${params.sortBy}` : ''}${params?.sortOrder ? `&sortOrder=${params.sortOrder}` : ''}`,\n        { token }\n      ),\n    getNotes: (deviceId: string, token: string) =>\n      fetchApi<{ notes: Array<{ id: string; content: string; author: string; authorId: string; createdAt: string }> }>(\n        `/api/devices/${deviceId}/notes`,\n        { token }\n      ),\n    addNote: (deviceId: string, content: string, token: string) =>\n      fetchApi<{ notes: Array<{ id: string; content: string; author: string; authorId: string; createdAt: string }> }>(\n        `/api/devices/${deviceId}/notes`,\n        { method: 'POST', body: { content }, token }\n      ),\n    deleteNote: (deviceId: string, noteId: string, token: string) =>\n      fetchApi<{ notes: Array<{ id: string; content: string; author: string; authorId: string; createdAt: string }> }>(\n        `/api/devices/${deviceId}/notes?noteId=${noteId}`,\n        { method: 'DELETE', token }\n      ),\n    updateTags: (deviceId: string, tags: string[], token: string) =>\n      fetchApi<{ device: { id: string; tags: string[] } }>(\n        `/api/devices/${deviceId}/tags`,\n        { method: 'PATCH', body: { tags }, token }\n      ),\n    compare: (deviceIds: string[], token: string) =>\n      fetchApi<{\n        comparison: {\n          devices: Array<{\n            id: string;\n            deviceId: string;\n            deviceCode: string | null;\n            platform: string;\n            osVersion: string | null;\n            appVersion: string | null;\n            model: string | null;\n            manufacturer: string | null;\n            user: string | null;\n            debugModeEnabled: boolean;\n            debugModeExpiresAt: Date | null;\n            fingerprint: string | null;\n            batteryLevel: number | null;\n            storageFree: bigint | null;\n            memoryTotal: bigint | null;\n            networkType: string | null;\n            screenWidth: number | null;\n            screenHeight: number | null;\n            screenDensity: number | null;\n            cpuArchitecture: string | null;\n            tags: string[];\n            state: string;\n            lastSeenAt: Date;\n            createdAt: Date;\n            stats: {\n              logs: number;\n              crashes: number;\n              apiTraces: number;\n              sessions: number;\n            };\n            metadata: Record<string, unknown> | null;\n          }>;\n          comparedAt: string;\n        };\n      }>(\n        `/api/devices/compare?ids=${deviceIds.join(',')}`,\n        { token }\n      ),\n    export: (projectId: string, format: 'csv' | 'json', token: string) =>\n      fetch(`${API_BASE}/api/devices/export?projectId=${projectId}&format=${format}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }).then(res => {\n        if (!res.ok) {\n          return res.json().then(data => {\n            throw new Error(data.error || `HTTP ${res.status}: ${res.statusText}`)\n          })\n        }\n        return format === 'csv' ? res.text() : res.json()\n      })\n  },\n  logs: {\n    list: (projectId: string, token: string, params?: {\n      deviceId?: string;\n      level?: string;\n      tag?: string;\n      search?: string;\n      screenName?: string;\n      startDate?: string;\n      endDate?: string;\n      page?: number;\n      limit?: number;\n      offset?: number\n    }) =>\n      fetchApi<{\n        logs: Array<{\n          id: string;\n          level: string;\n          message: string;\n          tag: string | null;\n          data: Record<string, unknown> | null;\n          fileName: string | null;\n          lineNumber: number | null;\n          functionName: string | null;\n          className: string | null;\n          screenName: string | null;\n          threadName: string | null;\n          timestamp: string;\n          device?: { deviceId: string; platform: string; model: string };\n          session?: { id: string; sessionToken: string };\n        }>;\n        total: number;\n        pagination: PaginationResponse;\n        levels: { verbose: number; debug: number; info: number; warn: number; error: number; assert: number };\n        tags: string[];\n        screenNames: string[];\n      }>(\n        `/api/logs?projectId=${projectId}${params?.deviceId ? `&deviceId=${params.deviceId}` : ''}${params?.level ? `&level=${params.level}` : ''}${params?.tag ? `&tag=${encodeURIComponent(params.tag)}` : ''}${params?.search ? `&search=${encodeURIComponent(params.search)}` : ''}${params?.screenName ? `&screenName=${encodeURIComponent(params.screenName)}` : ''}${params?.startDate ? `&startDate=${params.startDate}` : ''}${params?.endDate ? `&endDate=${params.endDate}` : ''}${params?.page ? `&page=${params.page}` : ''}${params?.limit ? `&limit=${params.limit}` : ''}${params?.offset ? `&offset=${params.offset}` : ''}`,\n        { token }\n      ),\n    clear: (projectId: string, token: string, params?: { level?: string; olderThan?: string }) =>\n      fetchApi<{ message: string; count: number }>(\n        `/api/logs?projectId=${projectId}${params?.level ? `&level=${params.level}` : ''}${params?.olderThan ? `&olderThan=${params.olderThan}` : ''}`,\n        { method: 'DELETE', token }\n      )\n  },\n  crashes: {\n    list: (projectId: string, token: string, params?: {\n      platform?: string;\n      deviceId?: string;\n      search?: string;\n      startDate?: string;\n      endDate?: string;\n      page?: number;\n      limit?: number;\n      sortBy?: string;\n      sortOrder?: string;\n    }) => {\n      const queryParams = new URLSearchParams({ projectId })\n      if (params?.platform) queryParams.append('platform', params.platform)\n      if (params?.deviceId) queryParams.append('deviceId', params.deviceId)\n      if (params?.search) queryParams.append('search', params.search)\n      if (params?.startDate) queryParams.append('startDate', params.startDate)\n      if (params?.endDate) queryParams.append('endDate', params.endDate)\n      if (params?.page) queryParams.append('page', params.page.toString())\n      if (params?.limit) queryParams.append('limit', params.limit.toString())\n      if (params?.sortBy) queryParams.append('sortBy', params.sortBy)\n      if (params?.sortOrder) queryParams.append('sortOrder', params.sortOrder)\n      \n      return fetchApi<{\n        crashes: Array<{\n          id: string;\n          message: string;\n          stackTrace: string | null;\n          metadata: Record<string, unknown> | null;\n          timestamp: string;\n          device?: { deviceId: string; platform: string; model: string | null };\n        }>;\n        total: number;\n        limit: number;\n        offset: number;\n        pagination: PaginationResponse;\n        platforms: string[];\n        devices: Array<{ id: string; deviceId: string; platform: string; model: string | null }>;\n      }>(`/api/crashes?${queryParams.toString()}`, { token })\n    }\n  },\n  traces: {\n    list: (projectId: string, token: string, params?: { deviceId?: string; method?: string; screenName?: string; groupByDevice?: boolean; page?: number; limit?: number; offset?: number }) =>\n      fetchApi<{\n        traces: Array<{\n          id: string;\n          url: string;\n          method: string;\n          statusCode: number;\n          duration: number;\n          error: string;\n          timestamp: string;\n          requestHeaders?: Record<string, string>;\n          requestBody?: string;\n          responseHeaders?: Record<string, string>;\n          responseBody?: string;\n          screenName?: string;\n          networkType?: string;\n          country?: string;\n          carrier?: string;\n          ipAddress?: string;\n          userAgent?: string;\n          cost?: number;\n          device?: { deviceId: string; platform: string; model: string }\n        }>;\n        total: number;\n        pagination: PaginationResponse;\n        screenNames: string[];\n        devices: Array<{ id: string; deviceId: string; platform: string; model: string }>;\n        groupedTraces?: Array<{\n          device: { id: string; deviceId: string; platform: string; model: string };\n          traces: Array<{ id: string; url: string; method: string; statusCode: number; duration: number; timestamp: string }>;\n          count: number;\n        }>;\n      }>(\n        `/api/traces?projectId=${projectId}${params?.deviceId ? `&deviceId=${params.deviceId}` : ''}${params?.method ? `&method=${params.method}` : ''}${params?.screenName ? `&screenName=${params.screenName}` : ''}${params?.groupByDevice ? `&groupByDevice=true` : ''}${params?.page ? `&page=${params.page}` : ''}${params?.limit ? `&limit=${params.limit}` : ''}${params?.offset ? `&offset=${params.offset}` : ''}`,\n        { token }\n      ),\n    clear: (projectId: string, token: string, deviceId?: string) =>\n      fetchApi<{ message: string; count: number }>(\n        `/api/traces?projectId=${projectId}${deviceId ? `&deviceId=${deviceId}` : ''}`,\n        { method: 'DELETE', token }\n      )\n  },\n  config: {\n    list: (projectId: string, token: string) =>\n      fetchApi<{\n        configs: Array<{\n          id: string;\n          endpoint: string;\n          method: string | null;\n          name: string | null;\n          description: string | null;\n          costPerRequest: number;\n          isEnabled: boolean;\n          createdAt: string;\n        }>;\n        suggestedEndpoints: Array<{\n          endpoint: string;\n          method: string;\n          fullUrl: string;\n        }>;\n      }>(\n        `/api/config?projectId=${projectId}`,\n        { token }\n      ),\n    create: (projectId: string, token: string, data: { endpoint: string; method?: string; name?: string; description?: string; costPerRequest?: number; isEnabled?: boolean }) =>\n      fetchApi<{ config: { id: string; endpoint: string; method: string | null; costPerRequest: number } }>(\n        '/api/config',\n        { method: 'POST', body: { projectId, ...data }, token }\n      ),\n    update: (token: string, data: { id: string; endpoint?: string; method?: string; name?: string; description?: string; costPerRequest?: number; isEnabled?: boolean }) =>\n      fetchApi<{ config: { id: string; endpoint: string; method: string | null; costPerRequest: number } }>(\n        '/api/config',\n        { method: 'PUT', body: data, token }\n      ),\n    delete: (configId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/config?id=${configId}`,\n        { method: 'DELETE', token }\n      )\n  },\n  sessions: {\n    list: (projectId: string, token: string, params?: {\n      deviceId?: string;\n      isActive?: string;\n      page?: number;\n      limit?: number;\n      sortBy?: string;\n      sortOrder?: string;\n    }) =>\n      fetchApi<{\n        sessions: Array<{\n          id: string;\n          sessionToken: string;\n          startedAt: string;\n          endedAt: string | null;\n          isActive: boolean;\n          duration: number | null;\n          screenCount: number;\n          screenFlow: string[];\n          device: { deviceId: string; platform: string; model: string } | null;\n          requestCount: number;\n          totalCost: number;\n        }>;\n        pagination: PaginationResponse;\n      }>(\n        `/api/sessions?projectId=${projectId}${params?.deviceId ? `&deviceId=${params.deviceId}` : ''}${params?.isActive ? `&isActive=${params.isActive}` : ''}${params?.page ? `&page=${params.page}` : ''}${params?.limit ? `&limit=${params.limit}` : ''}${params?.sortBy ? `&sortBy=${params.sortBy}` : ''}${params?.sortOrder ? `&sortOrder=${params.sortOrder}` : ''}`,\n        { token }\n      ),\n    timeline: (sessionId: string, token: string) =>\n      fetchApi<{\n        session: {\n          id: string;\n          sessionToken: string;\n          startedAt: string;\n          endedAt: string | null;\n          isActive: boolean;\n          duration: number | null;\n          screenCount: number;\n          eventCount: number;\n          errorCount: number;\n          appVersion: string | null;\n          osVersion: string | null;\n          locale: string | null;\n          timezone: string | null;\n          device: { deviceId: string; platform: string; model: string | null } | null;\n        };\n        timeline: Array<\n          | { type: 'screen'; name: string; timestamp: string }\n          | {\n              type: 'request';\n              id: string;\n              method: string;\n              url: string;\n              endpoint: string;\n              statusCode: number | null;\n              duration: number | null;\n              cost: number | null;\n              error: string | null;\n              requestBody: string | null;\n              responseBody: string | null;\n              requestHeaders: unknown;\n              responseHeaders: unknown;\n              timestamp: string;\n            }\n          | {\n              type: 'log';\n              id: string;\n              level: string;\n              message: string;\n              tag: string | null;\n              data: unknown;\n              fileName: string | null;\n              lineNumber: number | null;\n              functionName: string | null;\n              className: string | null;\n              timestamp: string;\n            }\n        >;\n        stats: {\n          totalRequests: number;\n          totalLogs: number;\n          successfulRequests: number;\n          failedRequests: number;\n          totalCost: number;\n        };\n      }>(\n        `/api/sessions/${sessionId}/timeline`,\n        { token }\n      )\n  },\n  analytics: {\n    get: (projectId: string, token: string, deviceId?: string) =>\n      fetchApi<{\n        summary: {\n          totalCost: number;\n          totalRequests: number;\n          uniqueEndpointsCost: number;\n          avgCostPerRequest: number;\n        };\n        endpointCosts: Array<{\n          endpoint: string;\n          method: string;\n          fullUrl: string;\n          totalCost: number;\n          requestCount: number;\n          avgCostPerRequest: number;\n        }>;\n        deviceCosts: Array<{\n          deviceId: string;\n          device: { id: string; deviceId: string; platform: string; model: string } | null;\n          totalCost: number;\n          requestCount: number;\n        }>;\n        sessionCosts: Array<{\n          id: string;\n          sessionToken: string;\n          startedAt: string;\n          endedAt: string | null;\n          isActive: boolean;\n          device: { deviceId: string; platform: string; model: string } | null;\n          requestCount: number;\n          totalCost: number;\n        }>;\n      }>(\n        `/api/analytics?projectId=${projectId}${deviceId ? `&deviceId=${deviceId}` : ''}`,\n        { token }\n      )\n  },\n  flow: {\n    get: (projectId: string, token: string, sessionId?: string) =>\n      fetchApi<{\n        nodes: Array<{\n          id: string;\n          name: string;\n          requestCount: number;\n          totalCost: number;\n          successCount: number;\n          errorCount: number;\n        }>;\n        edges: Array<{\n          id: string;\n          source: string;\n          target: string;\n          requestCount: number;\n          totalCost: number;\n          successCount: number;\n          errorCount: number;\n          sequenceNumber: number;\n          topEndpoints: Array<{\n            method: string;\n            endpoint: string;\n            url: string;\n            count: number;\n            cost: number;\n            successRate: number;\n            statusCode: number;\n            duration: number;\n            requestBody?: string;\n            responseBody?: string;\n          }>;\n        }>;\n        sessions: Array<{\n          id: string;\n          sessionToken: string;\n          startedAt: string;\n          endedAt: string | null;\n          isActive: boolean;\n          device: { deviceId: string; platform: string; model: string | null } | null;\n          requestCount: number;\n          totalCost: number;\n          screenSequence: string[];\n        }>;\n      }>(\n        `/api/flow?projectId=${projectId}${sessionId ? `&sessionId=${sessionId}` : ''}`,\n        { token }\n      )\n  },\n  settings: {\n    get: (projectId: string, token: string) =>\n      fetchApi<{\n        settings: {\n          id: string;\n          projectId: string;\n          emailEnabled: boolean;\n          emailAddresses: string[];\n          pushEnabled: boolean;\n          pushToken: string | null;\n          smsEnabled: boolean;\n          smsNumbers: string[];\n          webhookEnabled: boolean;\n          webhookUrl: string | null;\n          webhookSecret: string | null;\n          webhookHeaders: Record<string, string> | null;\n        };\n      }>(\n        `/api/settings?projectId=${projectId}`,\n        { token }\n      ),\n    update: (projectId: string, token: string, data: {\n      emailEnabled?: boolean;\n      emailAddresses?: string[];\n      pushEnabled?: boolean;\n      pushToken?: string;\n      smsEnabled?: boolean;\n      smsNumbers?: string[];\n      webhookEnabled?: boolean;\n      webhookUrl?: string;\n      webhookSecret?: string;\n      webhookHeaders?: Record<string, string>;\n    }) =>\n      fetchApi<{ settings: Record<string, unknown> }>(\n        '/api/settings',\n        { method: 'PUT', body: { projectId, ...data }, token }\n      )\n  },\n  featureFlags: {\n    get: (projectId: string, token: string) =>\n      fetchApi<{\n        flags: {\n          apiTracking: boolean;\n          screenTracking: boolean;\n          crashReporting: boolean;\n          logging: boolean;\n          deviceTracking: boolean;\n          sessionTracking: boolean;\n          businessConfig: boolean;\n          localization: boolean;\n          offlineSupport: boolean;\n          batchEvents: boolean;\n        };\n        projectId: string;\n      }>(\n        `/api/feature-flags?projectId=${projectId}`,\n        { token }\n      ),\n    update: (projectId: string, token: string, flags: Partial<{\n      apiTracking: boolean;\n      screenTracking: boolean;\n      crashReporting: boolean;\n      logging: boolean;\n      deviceTracking: boolean;\n      sessionTracking: boolean;\n      businessConfig: boolean;\n      localization: boolean;\n      offlineSupport: boolean;\n      batchEvents: boolean;\n    }>) =>\n      fetchApi<{\n        flags: Record<string, boolean>;\n        projectId: string;\n      }>(\n        '/api/feature-flags',\n        { method: 'PUT', body: { projectId, flags }, token }\n      )\n  },\n  alerts: {\n    list: (projectId: string, token: string) =>\n      fetchApi<{\n        alerts: Array<{\n          id: string;\n          title: string;\n          description: string | null;\n          endpoint: string | null;\n          method: string | null;\n          isEnabled: boolean;\n          monitorStandardErrors: boolean;\n          standardErrorCodes: number[];\n          customStatusCodes: number[];\n          bodyErrorField: string | null;\n          bodyErrorValues: string[];\n          headerErrorField: string | null;\n          headerErrorValues: string[];\n          notifyEmail: boolean;\n          notifyPush: boolean;\n          notifySms: boolean;\n          notifyWebhook: boolean;\n          cooldownMinutes: number;\n          createdAt: string;\n          _count: { monitoredErrors: number };\n        }>;\n        standardErrorCodes: {\n          client: number[];\n          server: number[];\n        };\n      }>(\n        `/api/alerts?projectId=${projectId}`,\n        { token }\n      ),\n    create: (projectId: string, token: string, data: {\n      title: string;\n      description?: string;\n      endpoint?: string;\n      method?: string;\n      isEnabled?: boolean;\n      monitorStandardErrors?: boolean;\n      standardErrorCodes?: number[];\n      customStatusCodes?: number[];\n      bodyErrorField?: string;\n      bodyErrorValues?: string[];\n      headerErrorField?: string;\n      headerErrorValues?: string[];\n      notifyEmail?: boolean;\n      notifyPush?: boolean;\n      notifySms?: boolean;\n      notifyWebhook?: boolean;\n      cooldownMinutes?: number;\n    }) =>\n      fetchApi<{ alert: Record<string, unknown> }>(\n        '/api/alerts',\n        { method: 'POST', body: { projectId, ...data }, token }\n      ),\n    update: (token: string, data: { id: string } & Record<string, unknown>) =>\n      fetchApi<{ alert: Record<string, unknown> }>(\n        '/api/alerts',\n        { method: 'PUT', body: data, token }\n      ),\n    delete: (alertId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/alerts?id=${alertId}`,\n        { method: 'DELETE', token }\n      )\n  },\n  monitor: {\n    list: (projectId: string, token: string, params?: { alertId?: string; isResolved?: boolean; limit?: number; offset?: number }) =>\n      fetchApi<{\n        errors: Array<{\n          id: string;\n          alertId: string;\n          projectId: string;\n          errorType: string;\n          errorCode: string;\n          endpoint: string;\n          method: string;\n          statusCode: number | null;\n          requestBody: string | null;\n          responseBody: string | null;\n          firstOccurrence: string;\n          lastOccurrence: string;\n          occurrenceCount: number;\n          affectedDevices: string[];\n          affectedSessions: string[];\n          lastTraceId: string | null;\n          lastNotifiedAt: string | null;\n          notificationCount: number;\n          isResolved: boolean;\n          resolvedAt: string | null;\n          resolvedBy: string | null;\n          notes: string | null;\n          alert: {\n            id: string;\n            title: string;\n            endpoint: string | null;\n            method: string | null;\n          };\n        }>;\n        total: number;\n        summary: {\n          totalErrors: number;\n          unresolvedCount: number;\n          resolvedCount: number;\n          totalOccurrences: number;\n        };\n      }>(\n        `/api/monitor?projectId=${projectId}${params?.alertId ? `&alertId=${params.alertId}` : ''}${params?.isResolved !== undefined ? `&isResolved=${params.isResolved}` : ''}${params?.limit ? `&limit=${params.limit}` : ''}${params?.offset ? `&offset=${params.offset}` : ''}`,\n        { token }\n      ),\n    get: (projectId: string, errorId: string, token: string) =>\n      fetchApi<{\n        error: Record<string, unknown>;\n        traces: Array<Record<string, unknown>>;\n      }>(\n        `/api/monitor?projectId=${projectId}&errorId=${errorId}`,\n        { token }\n      ),\n    update: (token: string, data: { id: string; isResolved?: boolean; notes?: string }) =>\n      fetchApi<{ error: Record<string, unknown> }>(\n        '/api/monitor',\n        { method: 'PUT', body: data, token }\n      ),\n    delete: (errorId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/monitor?id=${errorId}`,\n        { method: 'DELETE', token }\n      )\n  },\n  businessConfig: {\n    list: (projectId: string, token: string, category?: string) =>\n      fetchApi<{\n        configs: Array<{\n          id: string;\n          key: string;\n          label: string | null;\n          description: string | null;\n          valueType: string;\n          stringValue: string | null;\n          integerValue: number | null;\n          booleanValue: boolean | null;\n          decimalValue: number | null;\n          jsonValue: unknown;\n          imageUrl: string | null;\n          category: string | null;\n          isEnabled: boolean;\n          version: number;\n          metadata: unknown;\n          createdAt: string;\n          updatedAt: string;\n        }>;\n        categories: string[];\n      }>(\n        `/api/business-config?projectId=${projectId}${category ? `&category=${encodeURIComponent(category)}` : ''}`,\n        { token }\n      ),\n    create: (projectId: string, token: string, data: {\n      key: string;\n      label?: string;\n      description?: string;\n      valueType: 'string' | 'integer' | 'boolean' | 'decimal' | 'json' | 'image';\n      value: unknown;\n      category?: string;\n      isEnabled?: boolean;\n      metadata?: unknown;\n    }) =>\n      fetchApi<{ config: Record<string, unknown> }>(\n        '/api/business-config',\n        { method: 'POST', body: { projectId, ...data }, token }\n      ),\n    update: (token: string, data: {\n      id: string;\n      key?: string;\n      label?: string;\n      description?: string;\n      valueType?: 'string' | 'integer' | 'boolean' | 'decimal' | 'json' | 'image';\n      value?: unknown;\n      category?: string;\n      isEnabled?: boolean;\n      metadata?: unknown;\n    }) =>\n      fetchApi<{ config: Record<string, unknown> }>(\n        '/api/business-config',\n        { method: 'PUT', body: data, token }\n      ),\n    delete: (configId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/business-config?id=${configId}`,\n        { method: 'DELETE', token }\n      ),\n    // Change History\n    getChanges: (projectId: string, configId: string | undefined, limit: number, token: string) =>\n      fetchApi<{ changes: Array<{\n        id: string;\n        action: string;\n        beforeValue: any;\n        afterValue: any;\n        changes: any;\n        userId: string | null;\n        userName: string | null;\n        createdAt: string;\n        config: { key: string; label: string | null };\n      }> }>(\n        `/api/business-config/changes?projectId=${projectId}${configId ? `&configId=${configId}` : ''}&limit=${limit}`,\n        { token }\n      ),\n    // Evaluate config with targeting\n    evaluate: (configKey: string, context: {\n      user?: { id?: string; email?: string; [key: string]: any };\n      device?: { platform?: string; osVersion?: string; appVersion?: string; deviceModel?: string; [key: string]: any };\n      app?: { version?: string; buildNumber?: string; [key: string]: any };\n    }, apiKey: string) =>\n      fetchApi<{ receivesRollout: boolean; value: any; matchedTargeting?: boolean; reason?: string }>(\n        '/api/business-config/evaluate',\n        { method: 'POST', body: { configKey, context }, headers: { 'X-API-Key': apiKey } }\n      ),\n    // Analytics\n    getAnalytics: (projectId: string, configKey: string | undefined, startDate: string | undefined, endDate: string | undefined, token: string) =>\n      fetchApi<{\n        stats: {\n          totalFetches: number;\n          uniqueDevices: number;\n          uniqueUsers: number;\n          cacheHitRate: number;\n          targetingMatchRate: number;\n          rolloutReceiveRate: number;\n        };\n        byConfigKey: Array<{\n          configKey: string;\n          totalFetches: number;\n          uniqueDevices: number;\n          uniqueUsers: number;\n          cacheHits: number;\n          targetingMatches: number;\n          rolloutReceives: number;\n        }>;\n        metrics: Array<{\n          id: string;\n          configKey: string;\n          deviceId: string | null;\n          userId: string | null;\n          fetchCount: number;\n          cacheHit: boolean;\n          targetingMatched: boolean;\n          rolloutReceived: boolean;\n          lastFetchedAt: string;\n        }>;\n      }>(\n        `/api/business-config/analytics?projectId=${projectId}${configKey ? `&configKey=${configKey}` : ''}${startDate ? `&startDate=${startDate}` : ''}${endDate ? `&endDate=${endDate}` : ''}`,\n        { token }\n      ),\n  },\n  experiments: {\n    list: (projectId: string, status: string | undefined, token: string) =>\n      fetchApi<{ experiments: Array<{\n        id: string;\n        name: string;\n        description: string | null;\n        status: string;\n        variants: any;\n        targetingRules: any;\n        startDate: string | null;\n        endDate: string | null;\n        createdAt: string;\n        config: { key: string; label: string | null };\n        _count: { assignments: number; events: number };\n      }> }>(\n        `/api/experiments?projectId=${projectId}${status ? `&status=${status}` : ''}`,\n        { token }\n      ),\n    get: (experimentId: string, token: string) =>\n      fetchApi<{ experiment: any }>(\n        `/api/experiments/${experimentId}`,\n        { token }\n      ),\n    create: (data: {\n      projectId: string;\n      configId: string;\n      name: string;\n      description?: string;\n      variants: Array<{ value: any; weight: number; name: string }>;\n      targetingRules?: any;\n      assignmentType?: 'random' | 'consistent' | 'targeting';\n    }, token: string) =>\n      fetchApi<{ experiment: any }>(\n        '/api/experiments',\n        { method: 'POST', body: data, token }\n      ),\n    update: (experimentId: string, data: {\n      name?: string;\n      description?: string;\n      status?: string;\n      variants?: Array<{ value: any; weight: number; name: string }>;\n      targetingRules?: any;\n      startDate?: string | null;\n      endDate?: string | null;\n    }, token: string) =>\n      fetchApi<{ experiment: any }>(\n        `/api/experiments/${experimentId}`,\n        { method: 'PATCH', body: data, token }\n      ),\n    delete: (experimentId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/experiments/${experimentId}`,\n        { method: 'DELETE', token }\n      ),\n    getResults: (experimentId: string, token: string) =>\n      fetchApi<{\n        experiment: any;\n        stats: {\n          variants: Array<{\n            variantIndex: number;\n            assignments: number;\n            conversions: number;\n            conversionRate: number;\n            totalValue: number;\n            avgValue: number;\n          }>;\n          totalAssignments: number;\n          totalConversions: number;\n          overallConversionRate: number;\n        };\n        significance: Array<{\n          variantA: number;\n          variantB: number;\n          significant: boolean;\n          pValue: number;\n          confidence: number;\n        }>;\n        totalEvents: number;\n      }>(\n        `/api/experiments/${experimentId}/results`,\n        { token }\n      ),\n    assign: (experimentId: string, deviceId: string | undefined, userId: string | undefined, context: any, apiKey: string) =>\n      fetchApi<{ variantIndex: number; variantName: string; value: any }>(\n        `/api/experiments/${experimentId}/assign`,\n        { method: 'POST', body: { deviceId, userId, context }, headers: { 'X-API-Key': apiKey } }\n      ),\n    trackEvent: (experimentId: string, deviceId: string | undefined, userId: string | undefined, eventType: string, eventName: string, eventValue: number | undefined, metadata: any, apiKey: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/experiments/${experimentId}/events`,\n        { method: 'POST', body: { deviceId, userId, eventType, eventName, eventValue, metadata }, headers: { 'X-API-Key': apiKey } }\n      ),\n  },\n  deployments: {\n    deploy: (configId: string, strategy: string, config: any, token: string) =>\n      fetchApi<{ deployment: any }>(\n        `/api/business-config/${configId}/deploy`,\n        { method: 'POST', body: { strategy, config }, token }\n      ),\n    rollback: (configId: string, reason: string | undefined, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/business-config/${configId}/deploy/rollback`,\n        { method: 'POST', body: { reason }, token }\n      ),\n    getDeployments: (configId: string, token: string) =>\n      fetchApi<{ deployments: Array<{\n        id: string;\n        strategy: string;\n        status: string;\n        currentPercentage: number;\n        targetPercentage: number;\n        startDate: string;\n        endDate: string | null;\n        completedAt: string | null;\n        rolledBackAt: string | null;\n        createdAt: string;\n      }> }>(\n        `/api/business-config/${configId}/deployments`,\n        { token }\n      ),\n  },\n  configAlerts: {\n    list: (configId: string, token: string) =>\n      fetchApi<{ alerts: Array<{\n        id: string;\n        name: string;\n        description: string | null;\n        condition: string;\n        threshold: number;\n        operator: string;\n        enabled: boolean;\n        lastTriggered: string | null;\n        triggerCount: number;\n        _count: { events: number };\n      }> }>(\n        `/api/business-config/${configId}/alerts`,\n        { token }\n      ),\n    create: (configId: string, data: {\n      name: string;\n      description?: string;\n      condition: string;\n      threshold: number;\n      operator?: string;\n      timeWindow?: number;\n      minOccurrences?: number;\n      webhookUrl?: string;\n      emailRecipients?: string[];\n    }, token: string) =>\n      fetchApi<{ alert: any }>(\n        `/api/business-config/${configId}/alerts`,\n        { method: 'POST', body: data, token }\n      ),\n    update: (configId: string, alertId: string, data: {\n      name?: string;\n      description?: string;\n      enabled?: boolean;\n      condition?: string;\n      threshold?: number;\n      operator?: string;\n      timeWindow?: number;\n      minOccurrences?: number;\n      webhookUrl?: string;\n      emailRecipients?: string[];\n    }, token: string) =>\n      fetchApi<{ alert: any }>(\n        `/api/business-config/${configId}/alerts/${alertId}`,\n        { method: 'PATCH', body: data, token }\n      ),\n    delete: (configId: string, alertId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/business-config/${configId}/alerts/${alertId}`,\n        { method: 'DELETE', token }\n      ),\n    getEvents: (configId: string, alertId: string, acknowledged: boolean | undefined, token: string) =>\n      fetchApi<{ events: Array<{\n        id: string;\n        severity: string;\n        message: string;\n        metadata: any;\n        acknowledged: boolean;\n        createdAt: string;\n      }> }>(\n        `/api/business-config/${configId}/alerts/${alertId}/events${acknowledged !== undefined ? `?acknowledged=${acknowledged}` : ''}`,\n        { token }\n      ),\n    acknowledgeEvent: (configId: string, alertId: string, eventId: string, token: string) =>\n      fetchApi<{ event: any }>(\n        `/api/business-config/${configId}/alerts/${alertId}/events/${eventId}`,\n        { method: 'PATCH', token }\n      ),\n  },\n  configApprovals: {\n    list: (configId: string, token: string) =>\n      fetchApi<{ approvals: Array<{\n        id: string;\n        changeType: string;\n        status: string;\n        requiredApprovals: number;\n        currentApprovals: number;\n        requestedBy: string;\n        requestedAt: string;\n        decidedAt: string | null;\n      }> }>(\n        `/api/business-config/${configId}/approvals`,\n        { token }\n      ),\n    create: (configId: string, data: {\n      changeType: string;\n      changeData: any;\n      requiredApprovals?: number;\n      approvers: string[];\n    }, token: string) =>\n      fetchApi<{ approval: any }>(\n        `/api/business-config/${configId}/approvals`,\n        { method: 'POST', body: data, token }\n      ),\n    approve: (configId: string, approvalId: string, comment: string | undefined, token: string) =>\n      fetchApi<{ approval: any }>(\n        `/api/business-config/${configId}/approvals/${approvalId}`,\n        { method: 'PATCH', body: { action: 'approve', comment }, token }\n      ),\n    reject: (configId: string, approvalId: string, comment: string | undefined, token: string) =>\n      fetchApi<{ approval: any }>(\n        `/api/business-config/${configId}/approvals/${approvalId}`,\n        { method: 'PATCH', body: { action: 'reject', comment }, token }\n      ),\n  },\n  upload: {\n    uploadFile: async (projectId: string, token: string, file: File) => {\n      const formData = new FormData()\n      formData.append('file', file)\n      formData.append('projectId', projectId)\n\n      const res = await fetch(`${API_BASE}/api/upload`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      })\n\n      const data = await res.json()\n      if (!res.ok) {\n        throw new Error(data.error || 'Upload failed')\n      }\n      return data as { success: boolean; file: { id: string; filename: string; url: string; size: number; mimeType: string } }\n    },\n    deleteFile: (fileId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/upload?id=${fileId}`,\n        { method: 'DELETE', token }\n      ),\n    listFiles: (projectId: string, token: string) =>\n      fetchApi<{\n        files: Array<{\n          id: string;\n          filename: string;\n          storedName: string;\n          mimeType: string;\n          size: number;\n          url: string;\n          createdAt: string;\n        }>;\n      }>(\n        `/api/upload?projectId=${projectId}`,\n        { token }\n      )\n  },\n  localization: {\n    // Languages\n    getLanguages: (projectId: string, token: string) =>\n      fetchApi<{\n        languages: Array<{\n          id: string;\n          code: string;\n          name: string;\n          nativeName: string | null;\n          isDefault: boolean;\n          isEnabled: boolean;\n          isRTL: boolean;\n          createdAt: string;\n        }>;\n      }>(\n        `/api/localization/languages?projectId=${projectId}`,\n        { token }\n      ),\n    createLanguage: (projectId: string, token: string, data: {\n      code: string;\n      name: string;\n      nativeName?: string;\n      isDefault?: boolean;\n      isRTL?: boolean;\n    }) =>\n      fetchApi<{ language: Record<string, unknown> }>(\n        '/api/localization/languages',\n        { method: 'POST', body: { projectId, ...data }, token }\n      ),\n    updateLanguage: (token: string, data: {\n      id: string;\n      name?: string;\n      nativeName?: string;\n      isDefault?: boolean;\n      isEnabled?: boolean;\n      isRTL?: boolean;\n    }) =>\n      fetchApi<{ language: Record<string, unknown> }>(\n        '/api/localization/languages',\n        { method: 'PUT', body: data, token }\n      ),\n    deleteLanguage: (languageId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/localization/languages?id=${languageId}`,\n        { method: 'DELETE', token }\n      ),\n    // Keys\n    getKeys: (projectId: string, token: string, category?: string) =>\n      fetchApi<{\n        keys: Array<{\n          id: string;\n          key: string;\n          description: string | null;\n          category: string | null;\n          platform: string | null;\n          maxLength: number | null;\n          screenshot: string | null;\n          createdAt: string;\n          translations: Array<{\n            id: string;\n            value: string;\n            isReviewed: boolean;\n            language: {\n              id: string;\n              code: string;\n              name: string;\n            };\n          }>;\n        }>;\n      }>(\n        `/api/localization/keys?projectId=${projectId}${category ? `&category=${encodeURIComponent(category)}` : ''}`,\n        { token }\n      ),\n    createKey: (projectId: string, token: string, data: {\n      key: string;\n      description?: string;\n      category?: string;\n      platform?: string;\n      maxLength?: number;\n      screenshot?: string;\n    }) =>\n      fetchApi<{ key: Record<string, unknown> }>(\n        '/api/localization/keys',\n        { method: 'POST', body: { projectId, ...data }, token }\n      ),\n    updateKey: (token: string, data: {\n      id: string;\n      key?: string;\n      description?: string;\n      category?: string;\n      platform?: string;\n      maxLength?: number;\n      screenshot?: string;\n    }) =>\n      fetchApi<{ key: Record<string, unknown> }>(\n        '/api/localization/keys',\n        { method: 'PUT', body: data, token }\n      ),\n    deleteKey: (keyId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/localization/keys?id=${keyId}`,\n        { method: 'DELETE', token }\n      ),\n    // Translations\n    getTranslations: (projectId: string, token: string, languageCode?: string) =>\n      fetchApi<{\n        translations: Record<string, string>;\n        language: { code: string; name: string; isRTL: boolean } | null;\n      }>(\n        `/api/localization/translations?projectId=${projectId}${languageCode ? `&lang=${languageCode}` : ''}`,\n        { token }\n      ),\n    saveTranslation: (token: string, data: {\n      keyId: string;\n      languageId: string;\n      value: string;\n    }) =>\n      fetchApi<{ translation: Record<string, unknown> }>(\n        '/api/localization/translations',\n        { method: 'POST', body: data, token }\n      ),\n    updateTranslation: (token: string, data: {\n      keyId: string;\n      languageId: string;\n      value: string;\n    }) =>\n      fetchApi<{ translation: Record<string, unknown> }>(\n        '/api/localization/translations',\n        { method: 'POST', body: data, token }\n      ),\n    bulkUpdateTranslations: (projectId: string, token: string, translations: Array<{\n      keyId: string;\n      languageId: string;\n      value: string;\n    }>) =>\n      fetchApi<{ updated: number }>(\n        '/api/localization/translations',\n        { method: 'PUT', body: { projectId, translations }, token }\n      ),\n    // Import/Export\n    import: (projectId: string, token: string, file: File, options: {\n      format: 'csv' | 'json' | 'android_xml' | 'ios_strings' | 'xliff';\n      languageCode?: string;\n      createMissingKeys?: boolean;\n      updateExisting?: boolean;\n      dryRun?: boolean;\n      category?: string;\n    }) => {\n      const formData = new FormData();\n      formData.append('projectId', projectId);\n      formData.append('format', options.format);\n      formData.append('file', file);\n      if (options.languageCode) {\n        formData.append('languageCode', options.languageCode);\n      }\n      formData.append('options', JSON.stringify({\n        createMissingKeys: options.createMissingKeys ?? true,\n        updateExisting: options.updateExisting ?? true,\n        dryRun: options.dryRun ?? false,\n        category: options.category,\n      }));\n\n      return fetchApi<{\n        success: boolean;\n        stats?: {\n          keysCreated: number;\n          keysUpdated: number;\n          keysSkipped: number;\n          translationsCreated: number;\n          translationsUpdated: number;\n          errors: Array<{ key?: string; message: string }>;\n        };\n        preview?: Array<{\n          key: string;\n          value: string;\n          action: 'create' | 'update' | 'skip';\n        }>;\n        error?: string;\n        errors?: Array<{ row?: number; message: string }>;\n      }>(\n        '/api/localization/import',\n        {\n          method: 'POST',\n          body: formData,\n          token,\n          headers: {}, // Let browser set Content-Type for FormData\n        }\n      );\n    },\n    export: (projectId: string, token: string, options: {\n      format: 'csv' | 'json' | 'android_xml' | 'ios_strings' | 'xliff';\n      languageCode?: string;\n      category?: string;\n      includeEmpty?: boolean;\n    }) => {\n      const params = new URLSearchParams({\n        projectId,\n        format: options.format,\n      });\n      if (options.languageCode) {\n        params.append('languageCode', options.languageCode);\n      }\n      if (options.category) {\n        params.append('category', options.category);\n      }\n      if (options.includeEmpty) {\n        params.append('includeEmpty', 'true');\n      }\n\n      return fetch(`/api/localization/export?${params.toString()}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      }).then(async (res) => {\n        if (!res.ok) {\n          const error = await res.json();\n          throw new Error(error.error || 'Export failed');\n        }\n        return res.blob();\n      });\n    },\n    // Statistics\n    getStatistics: (projectId: string, token: string) =>\n      fetchApi<{\n        overview: {\n          totalKeys: number;\n          totalLanguages: number;\n          totalTranslations: number;\n          completionRate: number;\n        };\n        languages: Array<{\n          id: string;\n          code: string;\n          name: string;\n          totalKeys: number;\n          translatedKeys: number;\n          completionRate: number;\n          missingKeys: number;\n          reviewedCount: number;\n          reviewedRate: number;\n        }>;\n        categories: Array<{\n          category: string;\n          totalKeys: number;\n          translatedKeys: number;\n          completionRate: number;\n        }>;\n        recentActivity: Array<{\n          type: string;\n          timestamp: string;\n          details: Record<string, any>;\n        }>;\n      }>(\n        `/api/localization/statistics?projectId=${projectId}`,\n        { token }\n      ),\n    // Bulk Operations\n    bulkEdit: (token: string, data: {\n      projectId: string;\n      operation: 'update_translations' | 'delete_keys' | 'assign_category' | 'enable_languages' | 'disable_languages';\n      filters: {\n        keyIds?: string[];\n        languageIds?: string[];\n        category?: string;\n        hasTranslation?: boolean;\n        isReviewed?: boolean;\n      };\n      updates: {\n        category?: string;\n        translations?: Array<{\n          keyId: string;\n          languageId: string;\n          value: string;\n        }>;\n        isEnabled?: boolean;\n      };\n    }) =>\n      fetchApi<{\n        success: boolean;\n        affected: {\n          keys: number;\n          translations: number;\n        };\n        errors?: Array<{ key?: string; message: string }>;\n      }>(\n        '/api/localization/bulk',\n        { method: 'PATCH', body: data, token }\n      ),\n    // Machine Translation\n    translate: (keyId: string, targetLanguageId: string, sourceLanguageId: string | undefined, provider: string, token: string) =>\n      fetchApi<{ translation: { value: string; provider: string; confidence: number; cost: number } }>(\n        '/api/localization/translate',\n        { method: 'POST', body: { keyId, targetLanguageId, sourceLanguageId, provider }, token }\n      ),\n    // Translation Memory\n    getTMSuggestions: (projectId: string, sourceLanguageId: string, targetLanguageId: string, sourceText: string, minSimilarity: number, token: string) =>\n      fetchApi<{ suggestions: Array<{ targetText: string; similarity: number; usageCount: number; lastUsedAt: string }> }>(\n        `/api/localization/tm/suggestions?projectId=${projectId}&sourceLanguageId=${sourceLanguageId}&targetLanguageId=${targetLanguageId}&sourceText=${encodeURIComponent(sourceText)}&minSimilarity=${minSimilarity}`,\n        { token }\n      ),\n    // Comments\n    getComments: (translationId: string, projectId: string, token: string) =>\n      fetchApi<{ comments: Array<{ id: string; content: string; userId: string; userName: string; isResolved: boolean; createdAt: string }> }>(\n        `/api/localization/comments?translationId=${translationId}&projectId=${projectId}`,\n        { token }\n      ),\n    createComment: (translationId: string, projectId: string, content: string, token: string) =>\n      fetchApi<{ comment: { id: string; content: string; userId: string; userName: string; createdAt: string } }>(\n        '/api/localization/comments',\n        { method: 'POST', body: { translationId, projectId, content }, token }\n      ),\n    updateComment: (commentId: string, isResolved: boolean, token: string) =>\n      fetchApi<{ comment: { id: string; isResolved: boolean } }>(\n        `/api/localization/comments/${commentId}`,\n        { method: 'PATCH', body: { isResolved }, token }\n      ),\n    deleteComment: (commentId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/localization/comments/${commentId}`,\n        { method: 'DELETE', token }\n      ),\n    // History\n    getHistory: (projectId: string, translationId: string | undefined, keyId: string | undefined, limit: number, token: string) =>\n      fetchApi<{ history: Array<{ id: string; oldValue: string; newValue: string; changeType: string; userId: string; userName: string; createdAt: string }> }>(\n        `/api/localization/history?projectId=${projectId}${translationId ? `&translationId=${translationId}` : ''}${keyId ? `&keyId=${keyId}` : ''}&limit=${limit}`,\n        { token }\n      ),\n    // Glossary\n    getGlossary: (projectId: string, category: string | undefined, search: string | undefined, token: string) =>\n      fetchApi<{ glossary: Array<{ id: string; term: string; definition: string; context: string; translations: Record<string, string>; category: string }> }>(\n        `/api/localization/glossary?projectId=${projectId}${category ? `&category=${category}` : ''}${search ? `&search=${encodeURIComponent(search)}` : ''}`,\n        { token }\n      ),\n    createGlossaryTerm: (projectId: string, term: string, definition: string | undefined, context: string | undefined, translations: Record<string, string> | undefined, category: string | undefined, token: string) =>\n      fetchApi<{ term: { id: string; term: string; definition: string; translations: Record<string, string> } }>(\n        '/api/localization/glossary',\n        { method: 'POST', body: { projectId, term, definition, context, translations, category }, token }\n      ),\n    updateGlossaryTerm: (termId: string, data: Partial<{ term: string; definition: string; context: string; translations: Record<string, string>; category: string; isActive: boolean }>, token: string) =>\n      fetchApi<{ term: { id: string; term: string } }>(\n        `/api/localization/glossary/${termId}`,\n        { method: 'PUT', body: data, token }\n      ),\n    deleteGlossaryTerm: (termId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/localization/glossary/${termId}`,\n        { method: 'DELETE', token }\n      ),\n    // Translation Providers\n    getProviders: (projectId: string, token: string) =>\n      fetchApi<{ providers: Array<{ id: string; provider: string; isEnabled: boolean; autoTranslate: boolean }> }>(\n        `/api/localization/providers?projectId=${projectId}`,\n        { token }\n      ),\n    createProvider: (projectId: string, provider: string, apiKey: string | undefined, apiSecret: string | undefined, isEnabled: boolean, autoTranslate: boolean, defaultSourceLanguageId: string | undefined, token: string) =>\n      fetchApi<{ provider: { id: string; provider: string; isEnabled: boolean } }>(\n        '/api/localization/providers',\n        { method: 'POST', body: { projectId, provider, apiKey, apiSecret, isEnabled, autoTranslate, defaultSourceLanguageId }, token }\n      ),\n    // OTA Updates\n    checkOTA: (projectId: string, currentVersion: string | undefined, languageCode: string, apiKey: string) =>\n      fetchApi<{ updateAvailable: boolean; latestVersion: number; delta?: { added: Record<string, string>; updated: Record<string, string>; deleted: string[] }; fullPayload?: Record<string, string> }>(\n        `/api/localization/ota/check?projectId=${projectId}${currentVersion ? `&currentVersion=${currentVersion}` : ''}&languageCode=${languageCode}`,\n        { headers: { 'X-API-Key': apiKey } }\n      ),\n    logOTAUpdate: (projectId: string, deviceId: string, fromVersion: number, toVersion: number, languageCode: string, apiKey: string) =>\n      fetchApi<{ success: boolean }>(\n        '/api/localization/ota/update',\n        { method: 'POST', body: { projectId, deviceId, fromVersion, toVersion, languageCode }, headers: { 'X-API-Key': apiKey } }\n      ),\n  },\n  subscription: {\n    get: (token: string) =>\n      fetchApi<{ subscription: any }>(\n        '/api/subscription',\n        { token }\n      ),\n    getUsage: (token: string) =>\n      fetchApi<{ usage: any }>(\n        '/api/subscription/usage',\n        { token }\n      ),\n    getHistory: (token: string) =>\n      fetchApi<{ history: any[] }>(\n        '/api/subscription/history',\n        { token }\n      ),\n    upgrade: (planId: string, paymentMethodId: string | null, token: string) =>\n      fetchApi<{ success: boolean; subscription?: any; paymentIntent?: any; requiresPayment?: boolean; error?: string }>(\n        '/api/subscription/upgrade',\n        { method: 'POST', body: { planId, paymentMethodId }, token }\n      ),\n    confirmUpgrade: (paymentIntentId: string, planId: string, token: string) =>\n      fetchApi<{ success: boolean; subscription: any }>(\n        '/api/subscription/confirm-upgrade',\n        { method: 'POST', body: { paymentIntentId, planId }, token }\n      ),\n    update: (planName: string, token: string) =>\n      fetchApi<{ subscription: any }>(\n        '/api/subscription',\n        { method: 'PATCH', body: { planName }, token }\n      ),\n    getEnforcement: (token: string) =>\n      fetchApi<{ state: string; effectivePolicy: any; graceEndsAt: string | null; triggeredMetrics: any[] }>(\n        '/api/subscription/enforcement',\n        { token }\n      ),\n  },\n  paymentMethods: {\n    list: (token: string) =>\n      fetchApi<{ paymentMethods: any[] }>(\n        '/api/payment-methods',\n        { token }\n      ),\n    get: (id: string, token: string) =>\n      fetchApi<{ paymentMethod: any }>(\n        `/api/payment-methods/${id}`,\n        { token }\n      ),\n    create: (paymentMethodId: string, isDefault: boolean, token: string) =>\n      fetchApi<{ paymentMethod: any }>(\n        '/api/payment-methods',\n        { method: 'POST', body: { paymentMethodId, isDefault }, token }\n      ),\n    update: (id: string, updates: { isDefault?: boolean }, token: string) =>\n      fetchApi<{ paymentMethod: any }>(\n        `/api/payment-methods/${id}`,\n        { method: 'PATCH', body: updates, token }\n      ),\n    delete: (id: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/payment-methods/${id}`,\n        { method: 'DELETE', token }\n      ),\n  },\n  admin: {\n    getUsers: (token: string) =>\n      fetchApi<{ users: any[] }>(\n        '/api/admin/users',\n        { token }\n      ),\n    getSubscriptions: (token: string) =>\n      fetchApi<{ subscriptions: any[] }>(\n        '/api/admin/subscriptions',\n        { token }\n      ),\n    getStats: (token: string) =>\n      fetchApi<{ stats: any }>(\n        '/api/admin/stats',\n        { token }\n      ),\n    getRevenue: (token: string) =>\n      fetchApi<{ revenue: any }>(\n        '/api/admin/revenue',\n        { token }\n      ),\n    getAnalytics: (token: string) =>\n      fetchApi<{ analytics: any }>(\n        '/api/admin/analytics',\n        { token }\n      ),\n    // Offers Management\n    getOffers: (token: string, params?: { status?: string; type?: string }) => {\n      const query = params ? '?' + new URLSearchParams(params).toString() : ''\n      return fetchApi<{ offers: any[] }>(\n        `/api/admin/offers${query}`,\n        { token }\n      )\n    },\n    createOffers: (type: string, options: any, token: string) =>\n      fetchApi<{ success: boolean; created: number; errors: string[] }>(\n        '/api/admin/offers/create',\n        { method: 'POST', body: { type, ...options }, token }\n      ),\n    acceptOffer: (offerId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/admin/offers/${offerId}/accept`,\n        { method: 'POST', token }\n      ),\n    getForecast: (token: string) =>\n      fetchApi<{ forecast: any }>(\n        '/api/admin/forecast',\n        { token }\n      ),\n    // Plan Management\n    getPlans: (token: string) =>\n      fetchApi<{ plans: any[] }>(\n        '/api/admin/plans',\n        { token }\n      ),\n    getPlan: (planId: string, token: string) =>\n      fetchApi<{ plan: any }>(\n        `/api/admin/plans/${planId}`,\n        { token }\n      ),\n    createPlan: (plan: any, token: string) =>\n      fetchApi<{ plan: any }>(\n        '/api/admin/plans',\n        { method: 'POST', body: plan, token }\n      ),\n    updatePlan: (planId: string, plan: Partial<any>, token: string) =>\n      fetchApi<{ plan: any }>(\n        `/api/admin/plans/${planId}`,\n        { method: 'PATCH', body: plan, token }\n      ),\n    deletePlan: (planId: string, token: string) =>\n      fetchApi<{ success: boolean; message: string }>(\n        `/api/admin/plans/${planId}`,\n        { method: 'DELETE', token }\n      ),\n    // Subscription Management\n    getSubscription: (subscriptionId: string, token: string) =>\n      fetchApi<{ subscription: any }>(\n        `/api/admin/subscriptions/${subscriptionId}`,\n        { token }\n      ),\n    enableSubscription: (subscriptionId: string, token: string) =>\n      fetchApi<{ success: boolean; message: string }>(\n        `/api/admin/subscriptions/${subscriptionId}/enable`,\n        { method: 'PATCH', token }\n      ),\n    disableSubscription: (subscriptionId: string, token: string) =>\n      fetchApi<{ success: boolean; message: string }>(\n        `/api/admin/subscriptions/${subscriptionId}/disable`,\n        { method: 'PATCH', token }\n      ),\n    changeSubscriptionPlan: (subscriptionId: string, planId: string, token: string) =>\n      fetchApi<{ success: boolean; subscription: any }>(\n        `/api/admin/subscriptions/${subscriptionId}/plan`,\n        { method: 'PATCH', body: { planId }, token }\n      ),\n    updateSubscriptionStatus: (subscriptionId: string, status: string, token: string) =>\n      fetchApi<{ success: boolean; subscription: any }>(\n        `/api/admin/subscriptions/${subscriptionId}/status`,\n        { method: 'PATCH', body: { status }, token }\n      ),\n    updateSubscriptionQuotas: (subscriptionId: string, quotas: Record<string, number | null>, token: string) =>\n      fetchApi<{ success: boolean; subscription: any }>(\n        `/api/admin/subscriptions/${subscriptionId}/quotas`,\n        { method: 'PATCH', body: quotas, token }\n      ),\n    createSubscription: (data: { userId: string; planId: string; promoCodeId?: string; discountPercent?: number; discountAmount?: number }, token: string) =>\n      fetchApi<{ subscription: any }>(\n        '/api/admin/subscriptions',\n        { method: 'POST', body: data, token }\n      ),\n    // Promo Code Management\n    getPromoCodes: (token: string) =>\n      fetchApi<{ promoCodes: any[] }>(\n        '/api/admin/promo-codes',\n        { token }\n      ),\n    createPromoCode: (data: any, token: string) =>\n      fetchApi<{ promoCode: any }>(\n        '/api/admin/promo-codes',\n        { method: 'POST', body: data, token }\n      ),\n    getPromoCode: (promoCodeId: string, token: string) =>\n      fetchApi<{ promoCode: any }>(\n        `/api/admin/promo-codes/${promoCodeId}`,\n        { token }\n      ),\n    updatePromoCode: (promoCodeId: string, data: any, token: string) =>\n      fetchApi<{ promoCode: any }>(\n        `/api/admin/promo-codes/${promoCodeId}`,\n        { method: 'PATCH', body: data, token }\n      ),\n    deletePromoCode: (promoCodeId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/admin/promo-codes/${promoCodeId}`,\n        { method: 'DELETE', token }\n      ),\n    // Configuration Management\n    getConfigurations: (token: string, category?: string) =>\n      fetchApi<{ configurations: Array<{\n        id: string;\n        category: string;\n        key: string;\n        value: string;\n        encrypted: boolean;\n        description: string | null;\n        isActive: boolean;\n        metadata: Record<string, any> | null;\n        updatedBy: string | null;\n        createdAt: string;\n        updatedAt: string;\n      }> }>(\n        `/api/admin/configurations${category ? `?category=${category}` : ''}`,\n        { token }\n      ),\n    getConfiguration: (category: string, key: string, token: string) =>\n      fetchApi<{ configuration: {\n        id: string;\n        category: string;\n        key: string;\n        value: string;\n        encrypted: boolean;\n        description: string | null;\n        isActive: boolean;\n        metadata: Record<string, any> | null;\n        updatedBy: string | null;\n        createdAt: string;\n        updatedAt: string;\n      } }>(\n        `/api/admin/configurations/${category}/${key}`,\n        { token }\n      ),\n    saveConfiguration: (data: {\n      category: string;\n      key: string;\n      value?: string;\n      encrypted?: boolean;\n      description?: string;\n      isActive?: boolean;\n      metadata?: Record<string, any>;\n    }, token: string) =>\n      fetchApi<{ configuration: any }>(\n        '/api/admin/configurations',\n        { method: 'POST', body: data, token }\n      ),\n    deleteConfiguration: (category: string, key: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/admin/configurations/${category}/${key}`,\n        { method: 'DELETE', token }\n      ),\n    testConfiguration: (category: string, key: string, testType: string, testData: any, token: string) =>\n      fetchApi<{ testResult: { success: boolean; message: string; [key: string]: any } }>(\n        '/api/admin/configurations/test',\n        { method: 'POST', body: { category, key, testType, testData }, token }\n      ),\n  },\n  builds: {\n    create: (projectId: string, token: string, data: { featureType: string; name?: string; description?: string }) =>\n      fetchApi<{ build: any }>(\n        '/api/builds',\n        { method: 'POST', body: { projectId, ...data }, token }\n      ),\n    list: (projectId: string, token: string, featureType?: string) =>\n      fetchApi<{ builds: any[] }>(\n        `/api/builds?projectId=${projectId}${featureType ? `&featureType=${featureType}` : ''}`,\n        { token }\n      ),\n    get: (buildId: string, token: string) =>\n      fetchApi<{ build: any }>(\n        `/api/builds/${buildId}`,\n        { token }\n      ),\n    update: (buildId: string, token: string, data: { name?: string; description?: string }) =>\n      fetchApi<{ build: any }>(\n        `/api/builds/${buildId}`,\n        { method: 'PATCH', body: data, token }\n      ),\n    delete: (buildId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/builds/${buildId}`,\n        { method: 'DELETE', token }\n      ),\n    setMode: (buildId: string, mode: 'preview' | 'production', token: string) =>\n      fetchApi<{ build: any }>(\n        `/api/builds/${buildId}/mode`,\n        { method: 'PATCH', body: { mode }, token }\n      ),\n    getDiff: (buildId1: string, buildId2: string, token: string) =>\n      fetchApi<{ diff: any }>(\n        `/api/builds/diff/${buildId1}/${buildId2}`,\n        { token }\n      ),\n  },\n  mocks: {\n    listEnvironments: (projectId: string, token: string) =>\n      fetchApi<{ environments: any[] }>(\n        `/api/mocks/environments?projectId=${projectId}`,\n        { token }\n      ),\n    createEnvironment: (projectId: string, token: string, data: { name: string; description?: string; mode?: string }) =>\n      fetchApi<{ environment: any }>(\n        '/api/mocks/environments',\n        { method: 'POST', body: { projectId, ...data }, token }\n      ),\n    updateEnvironment: (envId: string, token: string, data: { isEnabled?: boolean; isDefault?: boolean }) =>\n      fetchApi<{ environment: any }>(\n        `/api/mocks/environments/${envId}`,\n        { method: 'PATCH', body: data, token }\n      ),\n    listEndpoints: (environmentId: string, token: string) =>\n      fetchApi<{ endpoints: any[] }>(\n        `/api/mocks/endpoints?environmentId=${environmentId}`,\n        { token }\n      ),\n    getEndpoint: (endpointId: string, token: string) =>\n      fetchApi<{ endpoint: any }>(\n        `/api/mocks/endpoints/${endpointId}`,\n        { token }\n      ),\n    createEndpoint: (token: string, data: { environmentId: string; path: string; method: string; description?: string }) =>\n      fetchApi<{ endpoint: any }>(\n        '/api/mocks/endpoints',\n        { method: 'POST', body: data, token }\n      ),\n    deleteEndpoint: (endpointId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/mocks/endpoints/${endpointId}`,\n        { method: 'DELETE', token }\n      ),\n    createResponse: (token: string, data: { endpointId: string; statusCode: number; name?: string; description?: string; responseBody?: any; responseHeaders?: Record<string, string>; delay?: number; isDefault?: boolean }) =>\n      fetchApi<{ response: any }>(\n        '/api/mocks/responses',\n        { method: 'POST', body: data, token }\n      ),\n    updateResponse: (responseId: string, token: string, data: any) =>\n      fetchApi<{ response: any }>(\n        `/api/mocks/responses/${responseId}`,\n        { method: 'PATCH', body: data, token }\n      ),\n    deleteResponse: (responseId: string, token: string) =>\n      fetchApi<{ success: boolean }>(\n        `/api/mocks/responses/${responseId}`,\n        { method: 'DELETE', token }\n      ),\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 976, "column": 0}, "map": {"version":3,"sources":["file:///Users/karim-f/Code/nivostack-monorepo-checkout/dashboard/src/components/SubscriptionBanner.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useAuth } from './AuthProvider'\nimport { api } from '@/lib/api'\nimport Link from 'next/link'\n\ntype Subscription = {\n  id: string\n  status: string\n  enabled: boolean\n  trialEndDate: string\n}\n\ntype UsageStats = {\n  trialActive: boolean\n  daysRemaining: number\n}\n\nexport default function SubscriptionBanner() {\n  const { token } = useAuth()\n  const [subscription, setSubscription] = useState<Subscription | null>(null)\n  const [usage, setUsage] = useState<UsageStats | null>(null)\n\n  useEffect(() => {\n    if (!token) return\n\n    Promise.all([\n      api.subscription.get(token).catch(() => null),\n      api.subscription.getUsage(token).catch(() => null),\n    ])\n      .then(([subData, usageData]) => {\n        if (subData) setSubscription(subData.subscription)\n        if (usageData) setUsage(usageData.usage)\n      })\n      .catch(() => {\n        // Silently fail - banner is not critical\n      })\n  }, [token])\n\n  if (!subscription || !usage) return null\n\n  // Check if admin disabled the subscription\n  const isAdminDisabled = subscription.enabled === false || subscription.status === 'disabled'\n  const isExpired = subscription.status === 'expired'\n  const isExpiringSoon = usage.trialActive && usage.daysRemaining > 0 && usage.daysRemaining <= 7\n\n  // Admin disabled - highest priority\n  if (isAdminDisabled) {\n    return (\n      <div className=\"bg-red-900 border-b border-red-700 text-white text-center p-4 mb-6\">\n        <div className=\"max-w-7xl mx-auto\">\n          <p className=\"text-sm font-medium mb-1\">\n             Your subscription has been disabled by an administrator\n          </p>\n          <p className=\"text-xs text-red-200\">\n            Some features may be unavailable. Please contact support for assistance.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!isExpired && !isExpiringSoon) return null\n\n  return (\n    <div className={`border-l-4 p-4 mb-6 rounded ${\n      isExpired\n        ? 'bg-red-900/20 border-red-600'\n        : 'bg-yellow-900/20 border-yellow-600'\n    }`}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className={`font-semibold mb-1 ${\n            isExpired ? 'text-red-400' : 'text-yellow-400'\n          }`}>\n            {isExpired ? 'Trial Expired' : 'Trial Ending Soon'}\n          </h3>\n          <p className=\"text-gray-300 text-sm\">\n            {isExpired\n              ? 'Your free trial has ended. SDK is disabled. Upgrade to continue using NivoStack and access your data.'\n              : `Your free trial expires in ${usage.daysRemaining} ${usage.daysRemaining === 1 ? 'day' : 'days'}. Upgrade to continue using all features.`}\n          </p>\n        </div>\n        <Link\n          href=\"/subscription\"\n          className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm whitespace-nowrap ml-4\"\n        >\n          {isExpired ? 'View Subscription' : 'Upgrade Now'}\n        </Link>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAmBe,SAAS;;IACtB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,6JAAO;IACzB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,0UAAQ,EAAsB;IACtE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,0UAAQ,EAAoB;IAEtD,IAAA,2UAAS;wCAAC;YACR,IAAI,CAAC,OAAO;YAEZ,QAAQ,GAAG,CAAC;gBACV,wIAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,KAAK;oDAAC,IAAM;;gBACxC,wIAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,OAAO,KAAK;oDAAC,IAAM;;aAC9C,EACE,IAAI;gDAAC,CAAC,CAAC,SAAS,UAAU;oBACzB,IAAI,SAAS,gBAAgB,QAAQ,YAAY;oBACjD,IAAI,WAAW,SAAS,UAAU,KAAK;gBACzC;+CACC,KAAK;gDAAC;gBACL,yCAAyC;gBAC3C;;QACJ;uCAAG;QAAC;KAAM;IAEV,IAAI,CAAC,gBAAgB,CAAC,OAAO,OAAO;IAEpC,2CAA2C;IAC3C,MAAM,kBAAkB,aAAa,OAAO,KAAK,SAAS,aAAa,MAAM,KAAK;IAClF,MAAM,YAAY,aAAa,MAAM,KAAK;IAC1C,MAAM,iBAAiB,MAAM,WAAW,IAAI,MAAM,aAAa,GAAG,KAAK,MAAM,aAAa,IAAI;IAE9F,oCAAoC;IACpC,IAAI,iBAAiB;QACnB,qBACE,8VAAC;YAAI,WAAU;sBACb,cAAA,8VAAC;gBAAI,WAAU;;kCACb,8VAAC;wBAAE,WAAU;kCAA2B;;;;;;kCAGxC,8VAAC;wBAAE,WAAU;kCAAuB;;;;;;;;;;;;;;;;;IAM5C;IAEA,IAAI,CAAC,aAAa,CAAC,gBAAgB,OAAO;IAE1C,qBACE,8VAAC;QAAI,WAAW,CAAC,4BAA4B,EAC3C,YACI,iCACA,sCACJ;kBACA,cAAA,8VAAC;YAAI,WAAU;;8BACb,8VAAC;;sCACC,8VAAC;4BAAG,WAAW,CAAC,mBAAmB,EACjC,YAAY,iBAAiB,mBAC7B;sCACC,YAAY,kBAAkB;;;;;;sCAEjC,8VAAC;4BAAE,WAAU;sCACV,YACG,0GACA,CAAC,2BAA2B,EAAE,MAAM,aAAa,CAAC,CAAC,EAAE,MAAM,aAAa,KAAK,IAAI,QAAQ,OAAO,yCAAyC,CAAC;;;;;;;;;;;;8BAGlJ,8VAAC,2UAAI;oBACH,MAAK;oBACL,WAAU;8BAET,YAAY,sBAAsB;;;;;;;;;;;;;;;;;AAK7C;GA1EwB;;QACJ,6JAAO;;;KADH"}},
    {"offset": {"line": 1127, "column": 0}, "map": {"version":3,"sources":["file:///Users/karim-f/Code/nivostack-monorepo-checkout/dashboard/src/components/UserProfileDropdown.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useAuth } from './AuthProvider'\nimport Link from 'next/link'\n\nexport default function UserProfileDropdown() {\n  const { user, logout } = useAuth()\n  const router = useRouter()\n  const [isOpen, setIsOpen] = useState(false)\n  const dropdownRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside)\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [isOpen])\n\n  const handleLogout = () => {\n    logout()\n    router.push('/login')\n  }\n\n  if (!user) return null\n\n  const userInitials = user.name\n    ? user.name\n        .split(' ')\n        .map(n => n[0])\n        .join('')\n        .toUpperCase()\n        .slice(0, 2)\n    : user.email[0].toUpperCase()\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-800 transition-colors\"\n      >\n        <div className=\"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white text-sm font-medium\">\n          {userInitials}\n        </div>\n        <div className=\"hidden md:block text-left\">\n          <div className=\"text-sm font-medium text-white\">{user.name || user.email}</div>\n          <div className=\"text-xs text-gray-400\">{user.email}</div>\n        </div>\n        <svg\n          className={`w-4 h-4 text-gray-400 transition-transform ${isOpen ? 'rotate-180' : ''}`}\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n        </svg>\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-64 bg-gray-900 rounded-lg shadow-xl border border-gray-800 z-50\">\n          <div className=\"p-4 border-b border-gray-800\">\n            <div className=\"text-sm font-medium text-white\">{user.name || 'User'}</div>\n            <div className=\"text-xs text-gray-400 mt-1\">{user.email}</div>\n            {user.isAdmin && (\n              <span className=\"inline-block mt-2 px-2 py-1 text-xs bg-purple-900/30 text-purple-400 rounded\">\n                Admin\n              </span>\n            )}\n          </div>\n\n          <div className=\"py-2\">\n            {!user.isAdmin && (\n              <>\n                <Link\n                  href=\"/subscription\"\n                  onClick={() => setIsOpen(false)}\n                  className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition-colors\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n                    </svg>\n                    <span>Subscription</span>\n                  </div>\n                </Link>\n\n                <Link\n                  href=\"/billing\"\n                  onClick={() => setIsOpen(false)}\n                  className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition-colors\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\" />\n                    </svg>\n                    <span>Billing</span>\n                  </div>\n                </Link>\n\n                <Link\n                  href=\"/invoices\"\n                  onClick={() => setIsOpen(false)}\n                  className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition-colors\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                    </svg>\n                    <span>Invoices</span>\n                  </div>\n                </Link>\n\n                <Link\n                  href=\"/subscription?tab=usage\"\n                  onClick={() => setIsOpen(false)}\n                  className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition-colors\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                    </svg>\n                    <span>Usage</span>\n                  </div>\n                </Link>\n\n                <div className=\"border-t border-gray-800 my-2\"></div>\n              </>\n            )}\n\n            <Link\n              href=\"/profile\"\n              onClick={() => setIsOpen(false)}\n              className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition-colors\"\n            >\n              <div className=\"flex items-center space-x-2\">\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                </svg>\n                <span>Profile Settings</span>\n              </div>\n            </Link>\n\n            {!user.isAdmin && (\n              <>\n                <Link\n                  href=\"/settings\"\n                  onClick={() => setIsOpen(false)}\n                  className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition-colors\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                    </svg>\n                    <span>NivoStack Settings</span>\n                  </div>\n                </Link>\n\n                <Link\n                  href=\"/docs\"\n                  onClick={() => setIsOpen(false)}\n                  className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition-colors\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n                    </svg>\n                    <span>Developer Guide</span>\n                  </div>\n                </Link>\n\n                <Link\n                  href=\"/setup\"\n                  onClick={() => setIsOpen(false)}\n                  className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition-colors\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                    </svg>\n                    <span>Setup Instructions</span>\n                  </div>\n                </Link>\n              </>\n            )}\n\n            <Link\n              href=\"/team\"\n              onClick={() => setIsOpen(false)}\n              className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition-colors\"\n            >\n              <div className=\"flex items-center space-x-2\">\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                </svg>\n                <span>Team Management</span>\n              </div>\n            </Link>\n\n            {user.isAdmin && (\n              <>\n                <Link\n                  href=\"/admin\"\n                  onClick={() => setIsOpen(false)}\n                  className=\"block px-4 py-2 text-sm text-purple-300 hover:bg-gray-800 hover:text-purple-200 transition-colors\"\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n                    </svg>\n                    <span>Admin Dashboard</span>\n                  </div>\n                </Link>\n              </>\n            )}\n          </div>\n\n          <div className=\"border-t border-gray-800 py-2\">\n            <button\n              onClick={handleLogout}\n              className=\"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-800 hover:text-red-300 transition-colors\"\n            >\n              <div className=\"flex items-center space-x-2\">\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                </svg>\n                <span>Logout</span>\n              </div>\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1845, "column": 0}, "map": {"version":3,"sources":["file:///Users/karim-f/Code/nivostack-monorepo-checkout/dashboard/src/components/NotificationBell.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useAuth } from './AuthProvider'\n\ninterface Notification {\n  id: string\n  type: string\n  title: string\n  message: string\n  data?: any\n  read: boolean\n  readAt: string | null\n  actionUrl: string | null\n  createdAt: string\n}\n\nexport default function NotificationBell() {\n  const { user } = useAuth()\n  const router = useRouter()\n  const [isOpen, setIsOpen] = useState(false)\n  const [notifications, setNotifications] = useState<Notification[]>([])\n  const [unreadCount, setUnreadCount] = useState(0)\n  const [loading, setLoading] = useState(false)\n  const dropdownRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!user) return\n\n    // Fetch notifications\n    fetchNotifications()\n\n    // Poll for new notifications every 30 seconds\n    const interval = setInterval(fetchNotifications, 30000)\n\n    return () => clearInterval(interval)\n  }, [user])\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside)\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [isOpen])\n\n  const fetchNotifications = async () => {\n    if (!user) return\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/notifications?limit=20', {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setNotifications(data.notifications || [])\n        setUnreadCount(data.unreadCount || 0)\n      }\n    } catch (error) {\n      console.error('Failed to fetch notifications:', error)\n    }\n  }\n\n  const markAsRead = async (notificationId: string) => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch(`/api/notifications/${notificationId}/read`, {\n        method: 'PATCH',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        setNotifications((prev) =>\n          prev.map((n) =>\n            n.id === notificationId ? { ...n, read: true, readAt: new Date().toISOString() } : n\n          )\n        )\n        setUnreadCount((prev) => Math.max(0, prev - 1))\n      }\n    } catch (error) {\n      console.error('Failed to mark notification as read:', error)\n    }\n  }\n\n  const markAllAsRead = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/notifications/read-all', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        setNotifications((prev) =>\n          prev.map((n) => ({ ...n, read: true, readAt: new Date().toISOString() }))\n        )\n        setUnreadCount(0)\n      }\n    } catch (error) {\n      console.error('Failed to mark all as read:', error)\n    }\n  }\n\n  const handleNotificationClick = async (notification: Notification) => {\n    if (!notification.read) {\n      await markAsRead(notification.id)\n    }\n\n    // Handle invitation notifications specially\n    if (notification.type === 'invitation') {\n      setIsOpen(false)\n      \n      // If we have a token, accept directly\n      if (notification.data?.token) {\n        await handleAcceptInvitation(notification.data.token, notification.data.projectId)\n        return\n      }\n      \n      // Otherwise, navigate to team page (handles both new and old format URLs)\n      const projectId = notification.data?.projectId\n      if (projectId) {\n        router.push(`/team?project=${projectId}`)\n        return\n      }\n      \n      // Fallback: navigate to team page\n      router.push('/team')\n      return\n    }\n\n    if (notification.actionUrl) {\n      setIsOpen(false)\n      router.push(notification.actionUrl)\n    }\n  }\n\n  const handleAcceptInvitation = async (token: string, projectId: string) => {\n    try {\n      const authToken = localStorage.getItem('token')\n      const response = await fetch(`/api/invitations/${token}/accept`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${authToken}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        // Refresh notifications to remove accepted one\n        fetchNotifications()\n        // Show success message\n        alert('Invitation accepted successfully!')\n        // Navigate to project\n        router.push(`/projects/${projectId}`)\n        // Force page reload to refresh project list\n        window.location.href = `/projects/${projectId}`\n      } else {\n        const error = await response.json()\n        console.error('Failed to accept invitation:', error)\n        alert(error.error || 'Failed to accept invitation. Please try again.')\n        // Navigate to team page as fallback\n        router.push(`/team?project=${projectId}`)\n      }\n    } catch (error) {\n      console.error('Failed to accept invitation:', error)\n      alert('Failed to accept invitation. Please try again.')\n      // Navigate to team page as fallback\n      router.push(`/team?project=${projectId}`)\n    }\n  }\n\n  const formatTimeAgo = (dateString: string) => {\n    const date = new Date(dateString)\n    const now = new Date()\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000)\n\n    if (diffInSeconds < 60) return 'Just now'\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`\n    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)}h ago`\n    if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)}d ago`\n    return date.toLocaleDateString()\n  }\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'invitation':\n        return (\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\" />\n          </svg>\n        )\n      case 'project_update':\n        return (\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n          </svg>\n        )\n      case 'alert':\n        return (\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n          </svg>\n        )\n      default:\n        return (\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\n          </svg>\n        )\n    }\n  }\n\n  if (!user) return null\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      <button\n        onClick={() => {\n          setIsOpen(!isOpen)\n          if (!isOpen) {\n            fetchNotifications()\n          }\n        }}\n        className=\"relative p-2 rounded-lg hover:bg-gray-800 transition-colors\"\n        aria-label=\"Notifications\"\n      >\n        <svg\n          className=\"w-6 h-6 text-gray-400\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\n          />\n        </svg>\n        {unreadCount > 0 && (\n          <span className=\"absolute top-0 right-0 flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-600 rounded-full\">\n            {unreadCount > 99 ? '99+' : unreadCount}\n          </span>\n        )}\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-96 bg-gray-900 rounded-lg shadow-xl border border-gray-800 z-50 max-h-[600px] flex flex-col\">\n          <div className=\"p-4 border-b border-gray-800 flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold text-white\">Notifications</h3>\n            {unreadCount > 0 && (\n              <button\n                onClick={markAllAsRead}\n                className=\"text-sm text-blue-400 hover:text-blue-300 transition-colors\"\n              >\n                Mark all as read\n              </button>\n            )}\n          </div>\n\n          <div className=\"overflow-y-auto flex-1\">\n            {loading ? (\n              <div className=\"p-8 text-center text-gray-400\">Loading...</div>\n            ) : notifications.length === 0 ? (\n              <div className=\"p-8 text-center text-gray-400\">\n                <svg\n                  className=\"w-12 h-12 mx-auto mb-4 text-gray-600\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\n                  />\n                </svg>\n                <p>No notifications</p>\n              </div>\n            ) : (\n              <div className=\"divide-y divide-gray-800\">\n                {notifications.map((notification) => (\n                  <button\n                    key={notification.id}\n                    onClick={() => handleNotificationClick(notification)}\n                    className={`w-full text-left p-4 hover:bg-gray-800 transition-colors ${\n                      !notification.read ? 'bg-gray-800/50' : ''\n                    }`}\n                  >\n                    <div className=\"flex items-start space-x-3\">\n                      <div\n                        className={`flex-shrink-0 mt-1 ${\n                          notification.read ? 'text-gray-500' : 'text-blue-500'\n                        }`}\n                      >\n                        {getNotificationIcon(notification.type)}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-start justify-between\">\n                          <p\n                            className={`text-sm font-medium ${\n                              notification.read ? 'text-gray-400' : 'text-white'\n                            }`}\n                          >\n                            {notification.title}\n                          </p>\n                          {!notification.read && (\n                            <span className=\"ml-2 flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full\"></span>\n                          )}\n                        </div>\n                        <p className=\"mt-1 text-sm text-gray-400 line-clamp-2\">\n                          {notification.message}\n                        </p>\n                        <p className=\"mt-2 text-xs text-gray-500\">\n                          {formatTimeAgo(notification.createdAt)}\n                        </p>\n                      </div>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2356, "column": 0}, "map": {"version":3,"sources":["file:///Users/karim-f/Code/nivostack-monorepo-checkout/dashboard/src/app/%28dashboard%29/layout.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter, usePathname } from 'next/navigation'\nimport Link from 'next/link'\nimport { useAuth } from '@/components/AuthProvider'\nimport SubscriptionBanner from '@/components/SubscriptionBanner'\nimport Sidebar from '@/components/Sidebar'\nimport UserProfileDropdown from '@/components/UserProfileDropdown'\nimport NotificationBell from '@/components/NotificationBell'\nimport { api } from '@/lib/api'\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const { user, logout, isLoading, token } = useAuth()\n  const router = useRouter()\n  const pathname = usePathname()\n  const isProjectPage = pathname?.startsWith('/projects/') && pathname !== '/projects'\n  const isAdminPage = pathname?.startsWith('/admin')\n  const isAdmin = user?.isAdmin === true\n  \n  // Extract project ID from pathname\n  const projectId = isProjectPage ? pathname.split('/projects/')[1]?.split('/')[0] : null\n  \n  // Project selector state\n  const [projects, setProjects] = useState<Array<{ id: string; name: string; role?: string }>>([])\n  const [currentProject, setCurrentProject] = useState<{ id: string; name: string } | null>(null)\n  const [showProjectDropdown, setShowProjectDropdown] = useState(false)\n  const [projectsLoading, setProjectsLoading] = useState(false)\n\n  useEffect(() => {\n    if (!isLoading && !user) {\n      router.push('/login')\n    }\n  }, [user, isLoading, router])\n\n  // Fetch projects for dropdown\n  useEffect(() => {\n    if (token && !isAdmin) {\n      fetchProjects()\n    }\n  }, [token, isAdmin])\n\n  // Update current project when projectId changes\n  useEffect(() => {\n    if (projectId && projects.length > 0) {\n      const project = projects.find(p => p.id === projectId)\n      if (project) {\n        setCurrentProject({ id: project.id, name: project.name })\n      }\n    } else if (!isProjectPage) {\n      setCurrentProject(null)\n    }\n  }, [projectId, projects, isProjectPage])\n\n  const fetchProjects = async () => {\n    if (!token) return\n    try {\n      setProjectsLoading(true)\n      const data = await api.projects.list(token)\n      setProjects(data.projects || [])\n    } catch (error) {\n      console.error('Failed to fetch projects:', error)\n    } finally {\n      setProjectsLoading(false)\n    }\n  }\n\n  const handleProjectChange = (newProjectId: string) => {\n    setShowProjectDropdown(false)\n    router.push(`/projects/${newProjectId}`)\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-950 flex items-center justify-center\">\n        <div className=\"text-gray-400\">Loading...</div>\n      </div>\n    )\n  }\n\n  if (!user) {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-950 flex\">\n      <div className=\"flex-1 flex flex-col\">\n        {/* Top Navigation */}\n        <nav className=\"bg-gray-900 border-b border-gray-800\">\n          <div className=\"px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex justify-between h-16\">\n              <div className=\"flex items-center space-x-8\">\n                {isProjectPage ? (\n                  // Project selector dropdown\n                  <div className=\"relative\">\n                    <button\n                      onClick={() => setShowProjectDropdown(!showProjectDropdown)}\n                      className=\"flex items-center space-x-2 px-3 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-white transition-colors\"\n                      disabled={projectsLoading}\n                    >\n                      <span className=\"text-lg font-semibold\">\n                        {currentProject ? currentProject.name : (projectsLoading ? 'Loading...' : 'Project')}\n                      </span>\n                      <svg\n                        className={`w-4 h-4 transition-transform ${showProjectDropdown ? 'rotate-180' : ''}`}\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                      </svg>\n                    </button>\n                    \n                    {showProjectDropdown && !projectsLoading && (\n                      <>\n                        <div\n                          className=\"fixed inset-0 z-10\"\n                          onClick={() => setShowProjectDropdown(false)}\n                        />\n                        <div className=\"absolute top-full left-0 mt-2 w-64 bg-gray-900 border border-gray-800 rounded-lg shadow-xl z-20 max-h-96 overflow-y-auto\">\n                          <div className=\"p-2\">\n                            <div className=\"px-3 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider\">\n                              Select Project\n                            </div>\n                            {projectsLoading ? (\n                              <div className=\"px-3 py-2 text-gray-400 text-sm\">Loading...</div>\n                            ) : projects.length === 0 ? (\n                              <div className=\"px-3 py-2 text-gray-400 text-sm\">No projects</div>\n                            ) : (\n                              projects.map((project) => (\n                                <button\n                                  key={project.id}\n                                  onClick={() => handleProjectChange(project.id)}\n                                  className={`w-full text-left px-3 py-2 rounded text-sm transition-colors ${\n                                    project.id === projectId\n                                      ? 'bg-blue-600 text-white'\n                                      : 'text-gray-300 hover:bg-gray-800'\n                                  }`}\n                                >\n                                  <div className=\"flex items-center justify-between\">\n                                    <span className=\"font-medium\">{project.name}</span>\n                                    {project.role && project.role !== 'owner' && (\n                                      <span className={`ml-2 px-1.5 py-0.5 text-xs rounded ${\n                                        project.role === 'admin'\n                                          ? 'bg-blue-900/30 text-blue-400'\n                                          : project.role === 'member'\n                                          ? 'bg-green-900/30 text-green-400'\n                                          : 'bg-gray-700/30 text-gray-400'\n                                      }`}>\n                                        {project.role}\n                                      </span>\n                                    )}\n                                  </div>\n                                </button>\n                              ))\n                            )}\n                            <div className=\"border-t border-gray-800 mt-2 pt-2\">\n                              <Link\n                                href=\"/projects\"\n                                onClick={() => setShowProjectDropdown(false)}\n                                className=\"block px-3 py-2 text-sm text-gray-300 hover:bg-gray-800 rounded transition-colors\"\n                              >\n                                View All Projects\n                              </Link>\n                            </div>\n                          </div>\n                        </div>\n                      </>\n                    )}\n                  </div>\n                ) : (\n                  <Link href={isAdmin ? \"/admin\" : \"/projects\"} className=\"text-xl font-bold text-white\">\n                    DevBridge\n                  </Link>\n                )}\n                {isAdmin ? (\n                  // Admin Navigation\n                  <>\n                    <Link\n                      href=\"/admin\"\n                      className={`transition-colors ${\n                        pathname === '/admin'\n                          ? 'text-white font-medium'\n                          : 'text-gray-300 hover:text-white'\n                      }`}\n                    >\n                      Dashboard\n                    </Link>\n                    <Link\n                      href=\"/admin/users\"\n                      className={`transition-colors ${\n                        pathname === '/admin/users'\n                          ? 'text-white font-medium'\n                          : 'text-gray-300 hover:text-white'\n                      }`}\n                    >\n                      Users\n                    </Link>\n                    <Link\n                      href=\"/admin/plans\"\n                      className={`transition-colors ${\n                        pathname === '/admin/plans'\n                          ? 'text-white font-medium'\n                          : 'text-gray-300 hover:text-white'\n                      }`}\n                    >\n                      Plans\n                    </Link>\n                    <Link\n                      href=\"/admin/subscriptions\"\n                      className={`transition-colors ${\n                        pathname?.startsWith('/admin/subscriptions')\n                          ? 'text-white font-medium'\n                          : 'text-gray-300 hover:text-white'\n                      }`}\n                    >\n                      Subscriptions\n                    </Link>\n                    <Link\n                      href=\"/admin/revenue\"\n                      className={`transition-colors ${\n                        pathname === '/admin/revenue'\n                          ? 'text-white font-medium'\n                          : 'text-gray-300 hover:text-white'\n                      }`}\n                    >\n                      Revenue\n                    </Link>\n                    <Link\n                      href=\"/admin/configurations\"\n                      className={`transition-colors ${\n                        pathname === '/admin/configurations'\n                          ? 'text-white font-medium'\n                          : 'text-gray-300 hover:text-white'\n                      }`}\n                    >\n                      Configurations\n                    </Link>\n                    <Link\n                      href=\"/admin/statistics\"\n                      className={`transition-colors ${\n                        pathname === '/admin/statistics'\n                          ? 'text-white font-medium'\n                          : 'text-gray-300 hover:text-white'\n                      }`}\n                    >\n                      Statistics\n                    </Link>\n                  </>\n                ) : (\n                  // Regular User Navigation - Only show Projects link, rest moved to user profile menu\n                  !isProjectPage && (\n                    <>\n                      <Link\n                        href=\"/projects\"\n                        className=\"text-gray-300 hover:text-white transition-colors\"\n                      >\n                        Projects\n                      </Link>\n                    </>\n                  )\n                )}\n              </div>\n              <div className=\"flex items-center space-x-4\">\n                <NotificationBell />\n                <UserProfileDropdown />\n              </div>\n            </div>\n          </div>\n        </nav>\n        \n        {/* Main Content */}\n        <main className=\"flex-1 overflow-auto\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n            {!isAdmin && <SubscriptionBanner />}\n            {children}\n          </div>\n        </main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}