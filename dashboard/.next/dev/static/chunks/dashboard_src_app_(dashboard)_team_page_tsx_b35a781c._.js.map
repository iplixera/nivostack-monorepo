{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/karim-f/Code/nivostack-monorepo-checkout/dashboard/src/app/%28dashboard%29/team/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useSearchParams } from 'next/navigation'\nimport { useAuth } from '@/components/AuthProvider'\nimport Link from 'next/link'\n\ninterface Project {\n  id: string\n  name: string\n  role: 'owner' | 'admin' | 'member' | 'viewer'\n}\n\ninterface TeamMember {\n  id: string\n  user: {\n    id: string\n    email: string\n    name: string | null\n  }\n  role: 'owner' | 'admin' | 'member' | 'viewer'\n  joinedAt: string | null\n}\n\ninterface Invitation {\n  id: string\n  projectId: string\n  project: {\n    id: string\n    name: string\n  }\n  email: string\n  role: string\n  invitedBy: {\n    id: string\n    name: string | null\n    email: string\n  }\n  invitedAt: string\n  expiresAt: string\n  status: 'pending' | 'accepted' | 'expired' | 'cancelled'\n}\n\ninterface SeatInfo {\n  current: number\n  limit: number | null\n  allowed: boolean\n}\n\ninterface PendingInvitationForUser {\n  id: string\n  projectId: string\n  project: {\n    id: string\n    name: string\n  }\n  role: string\n  token: string\n  invitedBy: {\n    id: string\n    name: string | null\n    email: string\n  }\n  invitedAt: string\n  expiresAt: string\n}\n\nexport default function TeamPage() {\n  const { user } = useAuth()\n  const searchParams = useSearchParams()\n  const [projects, setProjects] = useState<Project[]>([])\n  const [selectedProject, setSelectedProject] = useState<string | null>(null)\n  const [members, setMembers] = useState<TeamMember[]>([])\n  const [invitations, setInvitations] = useState<Invitation[]>([])\n  const [pendingInvitationsForUser, setPendingInvitationsForUser] = useState<PendingInvitationForUser[]>([])\n  const [loading, setLoading] = useState(true)\n  const [showInviteModal, setShowInviteModal] = useState(false)\n  const [inviteEmail, setInviteEmail] = useState('')\n  const [inviteRole, setInviteRole] = useState<'admin' | 'member' | 'viewer'>('member')\n  const [inviting, setInviting] = useState(false)\n  const [acceptingInvitation, setAcceptingInvitation] = useState<string | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const [seatInfo, setSeatInfo] = useState<SeatInfo | null>(null)\n\n  useEffect(() => {\n    fetchUserProjects()\n    fetchPendingInvitations()\n  }, [])\n\n  // Handle project query parameter from URL\n  useEffect(() => {\n    const projectParam = searchParams?.get('project')\n    if (projectParam) {\n      // Check if the project exists in the list\n      const projectExists = projects.some((p) => p.id === projectParam)\n      if (projectExists) {\n        setSelectedProject(projectParam)\n      } else {\n        // Project might be in pending invitations, wait for them to load\n        // This will be handled in fetchPendingInvitations\n      }\n    }\n  }, [searchParams, projects])\n\n  useEffect(() => {\n    if (selectedProject) {\n      fetchTeamData(selectedProject)\n    }\n  }, [selectedProject])\n\n  const fetchUserProjects = async () => {\n    try {\n      setLoading(true)\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/projects', {\n        headers: { Authorization: `Bearer ${token}` },\n      })\n      const data = await response.json()\n      \n      // Filter projects where user is owner or admin (can manage team)\n      const manageableProjects = (data.projects || []).filter(\n        (p: Project) => p.role === 'owner' || p.role === 'admin'\n      )\n      setProjects(manageableProjects)\n      \n      // Check for project query parameter first\n      const projectParam = searchParams?.get('project')\n      if (projectParam && manageableProjects.some((p) => p.id === projectParam)) {\n        setSelectedProject(projectParam)\n      } else if (manageableProjects.length > 0 && !selectedProject) {\n        // Select first project by default if no query param\n        setSelectedProject(manageableProjects[0].id)\n      }\n    } catch (err) {\n      console.error('Failed to fetch projects:', err)\n      setError('Failed to load projects')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchPendingInvitations = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/invitations/pending', {\n        headers: { Authorization: `Bearer ${token}` },\n      })\n      if (response.ok) {\n        const data = await response.json()\n        const invitations = data.invitations || []\n        setPendingInvitationsForUser(invitations)\n        \n        // Add projects with pending invitations to the projects list (if not already there)\n        // Use functional update to ensure we have the latest projects state\n        setProjects((prevProjects) => {\n          const projectIds = new Set(prevProjects.map((p) => p.id))\n          const newProjects = [...prevProjects]\n          \n          invitations.forEach((inv: PendingInvitationForUser) => {\n            if (!projectIds.has(inv.projectId)) {\n              // Add project to list with role 'member' (they have pending invitation)\n              newProjects.push({\n                id: inv.projectId,\n                name: inv.project.name,\n                role: 'member' as const,\n              })\n              projectIds.add(inv.projectId)\n            }\n          })\n          \n          return newProjects\n        })\n        \n        // If there's a project query parameter and it's in pending invitations, select it\n        const projectParam = searchParams?.get('project')\n        if (projectParam && invitations.some((inv: PendingInvitationForUser) => inv.projectId === projectParam)) {\n          setSelectedProject(projectParam)\n        }\n      }\n    } catch (err) {\n      console.error('Failed to fetch pending invitations:', err)\n    }\n  }\n\n  const handleAcceptPendingInvitation = async (invitation: PendingInvitationForUser) => {\n    try {\n      setAcceptingInvitation(invitation.id)\n      setError(null)\n      const token = localStorage.getItem('token')\n\n      const response = await fetch(`/api/invitations/${invitation.token}/accept`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        // Refresh everything\n        await fetchUserProjects()\n        await fetchPendingInvitations()\n        // Select the project\n        setSelectedProject(invitation.projectId)\n        alert('Invitation accepted successfully!')\n      } else {\n        const errorData = await response.json()\n        setError(errorData.error || 'Failed to accept invitation')\n      }\n    } catch (err: any) {\n      console.error('Failed to accept invitation:', err)\n      setError(err.message || 'Failed to accept invitation')\n    } finally {\n      setAcceptingInvitation(null)\n    }\n  }\n\n  const fetchTeamData = async (projectId: string) => {\n    try {\n      setLoading(true)\n      const token = localStorage.getItem('token')\n\n      // Fetch members\n      const membersRes = await fetch(`/api/projects/${projectId}/members`, {\n        headers: { Authorization: `Bearer ${token}` },\n      })\n      const membersData = await membersRes.json()\n      setMembers(membersData.members || [])\n      setSeatInfo(membersData.seatInfo || null)\n\n      // Fetch invitations\n      const invitationsRes = await fetch(`/api/projects/${projectId}/invitations`, {\n        headers: { Authorization: `Bearer ${token}` },\n      })\n      const invitationsData = await invitationsRes.json()\n      setInvitations(invitationsData.invitations || [])\n    } catch (err) {\n      console.error('Failed to fetch team data:', err)\n      setError('Failed to load team data')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleInvite = async () => {\n    if (!selectedProject || !inviteEmail.trim()) {\n      setError('Email is required')\n      return\n    }\n\n    try {\n      setInviting(true)\n      setError(null)\n      const token = localStorage.getItem('token')\n\n      const response = await fetch(`/api/projects/${selectedProject}/invitations`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          email: inviteEmail.trim(),\n          role: inviteRole,\n        }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to send invitation')\n      }\n\n      // Refresh data\n      await fetchTeamData(selectedProject)\n      setShowInviteModal(false)\n      setInviteEmail('')\n      setInviteRole('member')\n    } catch (err: any) {\n      setError(err.message || 'Failed to send invitation')\n    } finally {\n      setInviting(false)\n    }\n  }\n\n  const handleResendInvitation = async (invitationId: string) => {\n    if (!selectedProject) return\n    try {\n      setError(null)\n      const token = localStorage.getItem('token')\n      const response = await fetch(`/api/projects/${selectedProject}/invitations/${invitationId}/resend`, {\n        method: 'POST',\n        headers: { Authorization: `Bearer ${token}` },\n      })\n\n      if (response.ok) {\n        await fetchTeamData(selectedProject)\n      }\n    } catch (err) {\n      console.error('Failed to resend invitation:', err)\n    }\n  }\n\n  const handleCancelInvitation = async (invitationId: string) => {\n    if (!selectedProject) return\n    const invitation = invitations.find((i) => i.id === invitationId)\n    if (!invitation) return\n\n    if (!confirm(`Are you sure you want to cancel the invitation to ${invitation.email}?`)) return\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch(`/api/projects/${selectedProject}/invitations/${invitationId}`, {\n        method: 'DELETE',\n        headers: { Authorization: `Bearer ${token}` },\n      })\n\n      if (response.ok) {\n        await fetchTeamData(selectedProject)\n      }\n    } catch (err) {\n      console.error('Failed to cancel invitation:', err)\n    }\n  }\n\n  const handleRemoveMember = async (memberId: string) => {\n    if (!selectedProject) return\n    const member = members.find((m) => m.id === memberId)\n    if (!member) return\n\n    if (!confirm(`Are you sure you want to remove ${member.user.name || member.user.email} from this project?`)) return\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch(`/api/projects/${selectedProject}/members/${memberId}`, {\n        method: 'DELETE',\n        headers: { Authorization: `Bearer ${token}` },\n      })\n\n      const data = await response.json()\n\n      if (response.ok) {\n        await fetchTeamData(selectedProject)\n        setError(null)\n      } else {\n        setError(data.error || 'Failed to remove member')\n      }\n    } catch (err: any) {\n      console.error('Failed to remove member:', err)\n      setError(err.message || 'Failed to remove member')\n    }\n  }\n\n  const getRoleBadgeColor = (role: string) => {\n    switch (role) {\n      case 'owner':\n        return 'bg-purple-900/30 text-purple-400'\n      case 'admin':\n        return 'bg-blue-900/30 text-blue-400'\n      case 'member':\n        return 'bg-green-900/30 text-green-400'\n      case 'viewer':\n        return 'bg-gray-700 text-gray-300'\n      default:\n        return 'bg-gray-700 text-gray-300'\n    }\n  }\n\n  const currentProject = projects.find((p) => p.id === selectedProject)\n  const canInvite = currentProject?.role === 'owner' || currentProject?.role === 'admin'\n\n  if (loading && !selectedProject) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-800 rounded w-48 mb-4\"></div>\n          <div className=\"space-y-3\">\n            {[1, 2, 3].map((i) => (\n              <div key={i} className=\"h-16 bg-gray-800 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  // Show pending invitations even if no projects (but don't show empty state if there are pending invitations)\n  if (projects.length === 0 && pendingInvitationsForUser.length === 0 && !loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white\">Team Management</h2>\n          <p className=\"text-gray-400 mt-1\">Manage team members across your projects</p>\n        </div>\n        <div className=\"bg-gray-900 rounded-lg border border-gray-800 p-8 text-center\">\n          <p className=\"text-gray-400 mb-4\">You don't have any projects where you can manage teams.</p>\n          <p className=\"text-sm text-gray-500\">Only project owners and admins can manage teams.</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white\">Team Management</h2>\n          <p className=\"text-gray-400 mt-1\">Manage team members and invitations</p>\n          {seatInfo && seatInfo.limit !== null && (\n            <p className=\"text-sm text-gray-500 mt-1\">\n              Seats: {seatInfo.current} / {seatInfo.limit}\n              {seatInfo.current >= seatInfo.limit && (\n                <span className=\"ml-2 text-red-400\">(Limit reached)</span>\n              )}\n            </p>\n          )}\n        </div>\n        {canInvite && selectedProject && (\n          <button\n            onClick={() => setShowInviteModal(true)}\n            className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors\"\n          >\n            Invite Member\n          </button>\n        )}\n      </div>\n\n      {/* Pending Invitations for User */}\n      {pendingInvitationsForUser.length > 0 && (\n        <div className=\"bg-blue-900/20 border border-blue-800 rounded-lg p-6\">\n          <h3 className=\"text-lg font-semibold text-white mb-4\">\n            Pending Invitations ({pendingInvitationsForUser.length})\n          </h3>\n          <div className=\"space-y-3\">\n            {pendingInvitationsForUser.map((invitation) => (\n              <div\n                key={invitation.id}\n                className=\"bg-gray-900 rounded-lg border border-gray-800 p-4 flex items-center justify-between\"\n              >\n                <div className=\"flex-1\">\n                  <div className=\"text-white font-medium\">{invitation.project.name}</div>\n                  <div className=\"text-sm text-gray-400 mt-1\">\n                    Invited by {invitation.invitedBy.name || invitation.invitedBy.email} as{' '}\n                    <span className=\"capitalize\">{invitation.role}</span>\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    Expires {new Date(invitation.expiresAt).toLocaleDateString()}\n                  </div>\n                </div>\n                <button\n                  onClick={() => handleAcceptPendingInvitation(invitation)}\n                  disabled={acceptingInvitation === invitation.id}\n                  className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white rounded-lg transition-colors\"\n                >\n                  {acceptingInvitation === invitation.id ? 'Accepting...' : 'Accept Invitation'}\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Project Selector - Show if there are projects (including ones from pending invitations) */}\n      {projects.length > 0 && (\n        <div>\n          <label className=\"block text-sm font-medium text-gray-300 mb-2\">Select Project</label>\n          <select\n            value={selectedProject || ''}\n            onChange={(e) => setSelectedProject(e.target.value)}\n            className=\"w-full max-w-md px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            {projects.map((project) => (\n              <option key={project.id} value={project.id}>\n                {project.name} ({project.role})\n              </option>\n            ))}\n          </select>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"p-4 bg-red-900/30 border border-red-800 rounded-lg text-red-400 flex items-center justify-between\">\n          <span>{error}</span>\n          <button\n            onClick={() => setError(null)}\n            className=\"ml-4 text-red-300 hover:text-red-200 font-bold\"\n          >\n            ×\n          </button>\n        </div>\n      )}\n\n      {selectedProject && (\n        <>\n          {/* Members Section */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-white mb-4\">Members ({members.length})</h3>\n            <div className=\"bg-gray-900 rounded-lg border border-gray-800 overflow-hidden\">\n              {loading ? (\n                <div className=\"p-8 text-center text-gray-400\">Loading...</div>\n              ) : members.length === 0 ? (\n                <div className=\"p-8 text-center text-gray-400\">No members yet</div>\n              ) : (\n                <div className=\"divide-y divide-gray-800\">\n                  {members.map((member) => (\n                    <div key={member.id} className=\"p-4 hover:bg-gray-800/50 transition-colors\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-4\">\n                          <div className=\"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-medium\">\n                            {member.user.name\n                              ? member.user.name\n                                  .split(' ')\n                                  .map((n) => n[0])\n                                  .join('')\n                                  .toUpperCase()\n                                  .slice(0, 2)\n                              : member.user.email[0].toUpperCase()}\n                          </div>\n                          <div>\n                            <div className=\"text-white font-medium\">\n                              {member.user.name || member.user.email}\n                            </div>\n                            <div className=\"text-sm text-gray-400\">{member.user.email}</div>\n                            {member.joinedAt && (\n                              <div className=\"text-xs text-gray-500 mt-1\">\n                                Joined {new Date(member.joinedAt).toLocaleDateString()}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"flex items-center space-x-3\">\n                          <span className={`px-3 py-1 rounded-full text-xs font-medium ${getRoleBadgeColor(member.role)}`}>\n                            {member.role.charAt(0).toUpperCase() + member.role.slice(1)}\n                          </span>\n                          {canInvite && member.user.id !== user?.id && member.role !== 'owner' && (\n                            <button\n                              onClick={() => handleRemoveMember(member.id)}\n                              className=\"text-red-400 hover:text-red-300 text-sm\"\n                            >\n                              Remove\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Invitations Section */}\n          {invitations.length > 0 && (\n            <div>\n              <h3 className=\"text-lg font-semibold text-white mb-4\">\n                Pending Invitations ({invitations.filter((i) => i.status === 'pending').length})\n              </h3>\n              <div className=\"bg-gray-900 rounded-lg border border-gray-800 overflow-hidden\">\n                <div className=\"divide-y divide-gray-800\">\n                  {invitations\n                    .filter((i) => i.status === 'pending')\n                    .map((invitation) => (\n                      <div key={invitation.id} className=\"p-4 hover:bg-gray-800/50 transition-colors\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <div className=\"text-white font-medium\">{invitation.email}</div>\n                            <div className=\"text-sm text-gray-400 mt-1\">\n                              Invited by {invitation.invitedBy.name || invitation.invitedBy.email} as{' '}\n                              <span className=\"capitalize\">{invitation.role}</span>\n                            </div>\n                            <div className=\"text-xs text-gray-500 mt-1\">\n                              Expires {new Date(invitation.expiresAt).toLocaleDateString()}\n                            </div>\n                          </div>\n                          <div className=\"flex items-center space-x-2\">\n                            {canInvite && (\n                              <>\n                                <button\n                                  onClick={() => handleResendInvitation(invitation.id)}\n                                  className=\"px-3 py-1 text-sm bg-gray-800 hover:bg-gray-700 text-white rounded transition-colors\"\n                                >\n                                  Resend\n                                </button>\n                                <button\n                                  onClick={() => handleCancelInvitation(invitation.id)}\n                                  className=\"px-3 py-1 text-sm text-red-400 hover:text-red-300 transition-colors\"\n                                >\n                                  Cancel\n                                </button>\n                              </>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      )}\n\n      {/* Invite Modal */}\n      {showInviteModal && selectedProject && (\n        <div\n          className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\n          onClick={(e) => {\n            if (e.target === e.currentTarget) {\n              setShowInviteModal(false)\n              setError(null)\n            }\n          }}\n        >\n          <div className=\"bg-gray-900 rounded-lg border border-gray-800 p-6 w-full max-w-md\">\n            <h3 className=\"text-xl font-bold text-white mb-4\">Invite Team Member</h3>\n            {error && (\n              <div className=\"mb-4 p-3 bg-red-900/30 border border-red-800 rounded text-red-400 flex items-center justify-between text-sm\">\n                <span>{error}</span>\n                <button\n                  onClick={() => setError(null)}\n                  className=\"ml-2 text-red-300 hover:text-red-200\"\n                >\n                  ×\n                </button>\n              </div>\n            )}\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Email</label>\n                <input\n                  type=\"email\"\n                  value={inviteEmail}\n                  onChange={(e) => setInviteEmail(e.target.value)}\n                  placeholder=\"user@example.com\"\n                  className=\"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Role</label>\n                <select\n                  value={inviteRole}\n                  onChange={(e) => setInviteRole(e.target.value as any)}\n                  className=\"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"admin\">Admin</option>\n                  <option value=\"member\">Member</option>\n                  <option value=\"viewer\">Viewer</option>\n                </select>\n              </div>\n            </div>\n            <div className=\"flex items-center justify-end space-x-3 mt-6\">\n              <button\n                onClick={() => {\n                  setShowInviteModal(false)\n                  setError(null)\n                }}\n                className=\"px-4 py-2 text-gray-300 hover:text-white transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleInvite}\n                disabled={inviting}\n                className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {inviting ? 'Sending...' : 'Send Invitation'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}}]
}