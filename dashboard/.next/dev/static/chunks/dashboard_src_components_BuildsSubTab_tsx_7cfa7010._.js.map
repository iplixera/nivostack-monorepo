{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/karim-f/Code/nivostack-monorepo-checkout/dashboard/src/components/BuildsSubTab.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useAuth } from '@/components/AuthProvider'\nimport { api } from '@/lib/api'\n\ntype Build = {\n  id: string\n  version: number\n  name: string | null\n  description: string | null\n  mode: string | null\n  isActive: boolean\n  configCount: number\n  translationCount: number\n  createdAt: string\n  createdBy: string | null\n  creator: {\n    id: string\n    email: string\n    name: string | null\n  } | null\n  features: Array<{\n    id: string\n    featureType: string\n    itemCount: number\n  }>\n  _count?: {\n    changeLogs: number\n  }\n}\n\ntype FeatureType = 'business_config' | 'localization' | 'api_mocks'\n\ninterface BuildsSubTabProps {\n  projectId: string\n  featureType: FeatureType\n  featureLabel: string\n  token?: string\n}\n\nexport default function BuildsSubTab({ projectId, featureType, featureLabel, token: propToken }: BuildsSubTabProps) {\n  const router = useRouter()\n  const { token: authToken } = useAuth()\n  const token = propToken || authToken\n  const [builds, setBuilds] = useState<Build[]>([])\n  const [loading, setLoading] = useState(true)\n  const [creating, setCreating] = useState(false)\n  const [buildName, setBuildName] = useState('')\n  const [buildDescription, setBuildDescription] = useState('')\n  const [selectedBuild, setSelectedBuild] = useState<Build | null>(null)\n  const [showDiff, setShowDiff] = useState(false)\n  const [diffBuildId, setDiffBuildId] = useState<string | null>(null)\n  const [diffData, setDiffData] = useState<any>(null)\n  const [businessConfigUsage, setBusinessConfigUsage] = useState<{\n    used: number\n    limit: number | null\n    percentage: number\n  } | null>(null)\n  const [localizationLanguagesUsage, setLocalizationLanguagesUsage] = useState<{\n    used: number\n    limit: number | null\n    percentage: number\n  } | null>(null)\n  const [localizationKeysUsage, setLocalizationKeysUsage] = useState<{\n    used: number\n    limit: number | null\n    percentage: number\n  } | null>(null)\n\n  useEffect(() => {\n    if (!token || !projectId) return\n    loadBuilds()\n  }, [token, projectId, featureType])\n\n  // Fetch usage for enforcement based on feature type\n  useEffect(() => {\n    if (!token) return\n    const fetchUsage = async () => {\n      try {\n        const usageRes = await api.subscription.getUsage(token)\n        if (featureType === 'business_config' && usageRes?.usage?.businessConfigKeys) {\n          setBusinessConfigUsage(usageRes.usage.businessConfigKeys)\n        }\n        if (featureType === 'localization') {\n          if (usageRes?.usage?.localizationLanguages) {\n            setLocalizationLanguagesUsage(usageRes.usage.localizationLanguages)\n          }\n          if (usageRes?.usage?.localizationKeys) {\n            setLocalizationKeysUsage(usageRes.usage.localizationKeys)\n          }\n        }\n      } catch (error) {\n        console.error('Failed to fetch usage:', error)\n      }\n    }\n    fetchUsage()\n  }, [token, featureType])\n\n  const loadBuilds = async () => {\n    if (!projectId || !token) return\n    try {\n      setLoading(true)\n      const response = await api.builds.list(projectId, token, featureType)\n      const featureBuilds = (response.builds || []).filter((b: any) => \n        b.features?.some((f: any) => f.featureType === featureType)\n      )\n      setBuilds(featureBuilds)\n      if (featureBuilds.length > 0 && !selectedBuild) {\n        setSelectedBuild(featureBuilds[0])\n      }\n    } catch (error) {\n      console.error('Failed to load builds:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCreateBuild = async () => {\n    if (!token) return\n    try {\n      setCreating(true)\n      await api.builds.create(projectId, token, {\n        featureType,\n        name: buildName || undefined,\n        description: buildDescription || undefined,\n      })\n      setBuildName('')\n      setBuildDescription('')\n      await loadBuilds()\n    } catch (error) {\n      alert('Failed to create build: ' + (error instanceof Error ? error.message : 'Unknown error'))\n    } finally {\n      setCreating(false)\n    }\n  }\n\n  const handleSetMode = async (buildId: string, mode: 'preview' | 'production') => {\n    if (!token) return\n    try {\n      await api.builds.setMode(buildId, mode, token)\n      await loadBuilds()\n      if (selectedBuild?.id === buildId) {\n        const updated = await api.builds.get(buildId, token)\n        setSelectedBuild(updated.build)\n      }\n    } catch (error) {\n      alert('Failed to set build mode: ' + (error instanceof Error ? error.message : 'Unknown error'))\n    }\n  }\n\n  const handleDeleteBuild = async (buildId: string) => {\n    if (!token) return\n    if (!confirm('Are you sure you want to delete this build? This action cannot be undone.')) {\n      return\n    }\n    try {\n      await api.builds.delete(buildId, token)\n      if (selectedBuild?.id === buildId) {\n        setSelectedBuild(null)\n      }\n      await loadBuilds()\n    } catch (error) {\n      alert('Failed to delete build: ' + (error instanceof Error ? error.message : 'Unknown error'))\n    }\n  }\n\n  const handleShowDiff = async (buildId: string, compareWithId: string) => {\n    if (!token) return\n    try {\n      const response = await api.builds.getDiff(compareWithId, buildId, token)\n      setDiffData(response.diff)\n      setDiffBuildId(buildId)\n      setShowDiff(true)\n    } catch (error) {\n      alert('Failed to load diff: ' + (error instanceof Error ? error.message : 'Unknown error'))\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-gray-400\">Loading builds...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Enforcement Banner for Business Config Keys (only for business_config) */}\n      {featureType === 'business_config' && businessConfigUsage && businessConfigUsage.limit !== null && (\n        <>\n          {(() => {\n            const percentage = businessConfigUsage.percentage\n            const warnThreshold = 80\n            const hardThreshold = 100\n            \n            if (percentage >= hardThreshold) {\n              return (\n                <div className=\"bg-red-900/20 border-l-4 border-red-600 p-4 rounded mb-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-red-400 font-semibold mb-2 flex items-center gap-2\">\n                        <span>üö´</span>\n                        <span>Business Config Keys Quota Exceeded</span>\n                      </h3>\n                      <p className=\"text-gray-300 text-sm mb-2\">\n                        You have reached your business config keys limit: <strong>{businessConfigUsage.used}/{businessConfigUsage.limit} keys</strong> ({percentage.toFixed(1)}%).\n                      </p>\n                      <p className=\"text-gray-300 text-sm\">\n                        Build creation is disabled. Please upgrade your plan to create more config keys.\n                      </p>\n                    </div>\n                    <button\n                      onClick={() => router.push('/subscription')}\n                      className=\"ml-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm whitespace-nowrap\"\n                    >\n                      Upgrade Plan\n                    </button>\n                  </div>\n                </div>\n              )\n            } else if (percentage >= warnThreshold) {\n              return (\n                <div className=\"bg-yellow-900/20 border-l-4 border-yellow-600 p-4 rounded mb-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-yellow-400 font-semibold mb-2 flex items-center gap-2\">\n                        <span>‚ö†Ô∏è</span>\n                        <span>Approaching Business Config Keys Limit</span>\n                      </h3>\n                      <p className=\"text-gray-300 text-sm mb-2\">\n                        You are approaching your business config keys limit: <strong>{businessConfigUsage.used}/{businessConfigUsage.limit} keys</strong> ({percentage.toFixed(1)}%).\n                      </p>\n                      <p className=\"text-gray-300 text-sm\">\n                        You can create {Math.max(0, businessConfigUsage.limit - businessConfigUsage.used)} more key{businessConfigUsage.limit - businessConfigUsage.used !== 1 ? 's' : ''} before reaching your limit.\n                      </p>\n                    </div>\n                    <button\n                      onClick={() => router.push('/subscription')}\n                      className=\"ml-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm whitespace-nowrap\"\n                    >\n                      Upgrade Plan\n                    </button>\n                  </div>\n                </div>\n              )\n            }\n            return null\n          })()}\n        </>\n      )}\n\n      {/* Enforcement Banner for Localization (only for localization feature type) */}\n      {featureType === 'localization' && (\n        <>\n          {localizationLanguagesUsage && localizationLanguagesUsage.limit !== null && localizationLanguagesUsage.percentage >= 100 && (\n            <div className=\"bg-red-900/20 border-l-4 border-red-600 p-4 rounded mb-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-red-400 font-semibold mb-2 flex items-center gap-2\">\n                    <span>üö´</span>\n                    <span>Localization Languages Quota Exceeded</span>\n                  </h3>\n                  <p className=\"text-gray-300 text-sm mb-2\">\n                    You have reached your localization languages limit: <strong>{localizationLanguagesUsage.used}/{localizationLanguagesUsage.limit} languages</strong> ({localizationLanguagesUsage.percentage.toFixed(1)}%).\n                  </p>\n                  <p className=\"text-gray-300 text-sm\">\n                    Build creation is disabled. Please upgrade your plan to add more languages.\n                  </p>\n                </div>\n                <button\n                  onClick={() => router.push('/subscription')}\n                  className=\"ml-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm whitespace-nowrap\"\n                >\n                  Upgrade Plan\n                </button>\n              </div>\n            </div>\n          )}\n          {localizationKeysUsage && localizationKeysUsage.limit !== null && localizationKeysUsage.percentage >= 100 && (\n            <div className=\"bg-red-900/20 border-l-4 border-red-600 p-4 rounded mb-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-red-400 font-semibold mb-2 flex items-center gap-2\">\n                    <span>üö´</span>\n                    <span>Localization Keys Quota Exceeded</span>\n                  </h3>\n                  <p className=\"text-gray-300 text-sm mb-2\">\n                    You have reached your localization keys limit: <strong>{localizationKeysUsage.used}/{localizationKeysUsage.limit} keys</strong> ({localizationKeysUsage.percentage.toFixed(1)}%).\n                  </p>\n                  <p className=\"text-gray-300 text-sm\">\n                    Build creation is disabled. Please upgrade your plan to create more keys.\n                  </p>\n                </div>\n                <button\n                  onClick={() => router.push('/subscription')}\n                  className=\"ml-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm whitespace-nowrap\"\n                >\n                  Upgrade Plan\n                </button>\n              </div>\n            </div>\n          )}\n        </>\n      )}\n      {/* Header with Create Build */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-white\">{featureLabel} Builds</h3>\n          <p className=\"text-sm text-gray-400 mt-1\">\n            {builds.length} build{builds.length !== 1 ? 's' : ''}\n          </p>\n        </div>\n        <div className=\"flex gap-3\">\n          <input\n            type=\"text\"\n            placeholder=\"Build name (optional)\"\n            value={buildName}\n            onChange={(e) => setBuildName(e.target.value)}\n            className=\"px-4 py-2 bg-gray-800 border border-gray-700 rounded text-white placeholder-gray-500 text-sm\"\n          />\n          <button\n            onClick={handleCreateBuild}\n            disabled={!!(creating || \n              (featureType === 'business_config' && businessConfigUsage && businessConfigUsage.limit !== null && businessConfigUsage.percentage >= 100) ||\n              (featureType === 'localization' && (\n                (localizationLanguagesUsage && localizationLanguagesUsage.limit !== null && localizationLanguagesUsage.percentage >= 100) ||\n                (localizationKeysUsage && localizationKeysUsage.limit !== null && localizationKeysUsage.percentage >= 100)\n              ))\n            )}\n            className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed text-sm\"\n            title={\n              featureType === 'business_config' && businessConfigUsage && businessConfigUsage.limit !== null && businessConfigUsage.percentage >= 100 \n                ? 'Cannot create build: Business config keys quota exceeded'\n                : featureType === 'localization' && (\n                  (localizationLanguagesUsage && localizationLanguagesUsage.limit !== null && localizationLanguagesUsage.percentage >= 100) ||\n                  (localizationKeysUsage && localizationKeysUsage.limit !== null && localizationKeysUsage.percentage >= 100)\n                )\n                ? 'Cannot create build: Localization quota exceeded'\n                : undefined\n            }\n          >\n            {creating ? 'Creating...' : 'Create Build'}\n          </button>\n        </div>\n      </div>\n\n      {/* Builds Table */}\n      <div className=\"bg-gray-900 rounded-lg border border-gray-800 overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-800\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Version</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Name</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Items</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Created By</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Created</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Mode</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider\">Actions</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-800\">\n              {builds.length === 0 ? (\n                <tr>\n                  <td colSpan={7} className=\"px-6 py-8 text-center text-gray-400\">\n                    No builds yet. Create your first build for {featureLabel}!\n                  </td>\n                </tr>\n              ) : (\n                builds.map((build) => {\n                  const featureData = build.features.find(f => f.featureType === featureType)\n                  const itemCount = featureData?.itemCount || 0\n\n                  return (\n                    <tr\n                      key={build.id}\n                      className={`hover:bg-gray-800/50 cursor-pointer ${\n                        selectedBuild?.id === build.id ? 'bg-blue-900/20' : ''\n                      }`}\n                      onClick={() => setSelectedBuild(build)}\n                    >\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm font-medium text-white\">v{build.version}</div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"text-sm text-white\">{build.name || `v${build.version}`}</div>\n                        {build.description && (\n                          <div className=\"text-xs text-gray-400 mt-1\">{build.description}</div>\n                        )}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">\n                        {itemCount} item{itemCount !== 1 ? 's' : ''}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        {build.creator ? (\n                          <div>\n                            <div className=\"text-sm text-white\">{build.creator.name || build.creator.email}</div>\n                            <div className=\"text-xs text-gray-400\">{build.creator.email}</div>\n                          </div>\n                        ) : (\n                          <span className=\"text-sm text-gray-500\">Unknown</span>\n                        )}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">\n                        {new Date(build.createdAt).toLocaleDateString()}\n                        <div className=\"text-xs text-gray-500\">\n                          {new Date(build.createdAt).toLocaleTimeString()}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        {build.mode ? (\n                          <span className={`px-2 py-1 text-xs rounded ${\n                            build.mode === 'production'\n                              ? 'bg-green-900/30 text-green-400'\n                              : 'bg-blue-900/30 text-blue-400'\n                          }`}>\n                            {build.mode === 'production' ? 'Production' : 'Preview'}\n                            {build.isActive && ' ‚úì'}\n                          </span>\n                        ) : (\n                          <span className=\"text-xs text-gray-500\">Not assigned</span>\n                        )}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        <div className=\"flex items-center gap-2\" onClick={(e) => e.stopPropagation()}>\n                          <button\n                            onClick={() => handleSetMode(build.id, 'preview')}\n                            disabled={build.mode === 'preview' && build.isActive}\n                            className={`px-3 py-1 rounded text-xs ${\n                              build.mode === 'preview' && build.isActive\n                                ? 'bg-blue-600 text-white cursor-not-allowed'\n                                : 'bg-gray-700 hover:bg-gray-600 text-white'\n                            }`}\n                            title=\"Set as Preview\"\n                          >\n                            Preview\n                          </button>\n                          <button\n                            onClick={() => handleSetMode(build.id, 'production')}\n                            disabled={build.mode === 'production' && build.isActive}\n                            className={`px-3 py-1 rounded text-xs ${\n                              build.mode === 'production' && build.isActive\n                                ? 'bg-green-600 text-white cursor-not-allowed'\n                                : 'bg-gray-700 hover:bg-gray-600 text-white'\n                            }`}\n                            title=\"Set as Production\"\n                          >\n                            Production\n                          </button>\n                          {builds.length > 1 && (\n                            <select\n                              onChange={(e) => {\n                                if (e.target.value) {\n                                  handleShowDiff(e.target.value, build.id)\n                                }\n                              }}\n                              className=\"px-2 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded text-xs\"\n                              onClick={(e) => e.stopPropagation()}\n                              title=\"Compare with\"\n                              defaultValue=\"\"\n                            >\n                              <option value=\"\">Compare</option>\n                              {builds\n                                .filter(b => b.id !== build.id)\n                                .map((b) => (\n                                  <option key={b.id} value={b.id}>\n                                    {b.name || `v${b.version}`}\n                                  </option>\n                                ))}\n                            </select>\n                          )}\n                          <button\n                            onClick={() => handleDeleteBuild(build.id)}\n                            disabled={build.isActive}\n                            className=\"px-3 py-1 bg-red-900/30 hover:bg-red-900/50 text-red-400 rounded text-xs disabled:opacity-50 disabled:cursor-not-allowed\"\n                            title=\"Delete Build\"\n                          >\n                            Delete\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  )\n                })\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Diff View Modal */}\n      {showDiff && diffData && selectedBuild && diffBuildId && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-gray-900 rounded-lg p-6 max-w-4xl w-full max-h-[80vh] overflow-y-auto border border-gray-800\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-2xl font-bold text-white\">Build Comparison</h2>\n              <button\n                onClick={() => {\n                  setShowDiff(false)\n                  setDiffData(null)\n                  setDiffBuildId(null)\n                }}\n                className=\"text-gray-400 hover:text-white text-2xl\"\n              >\n                √ó\n              </button>\n            </div>\n\n            <div className=\"space-y-6\">\n              {Object.entries(diffData.diff || {}).map(([featureType, changes]: [string, any]) => (\n                <div key={featureType} className=\"border border-gray-700 rounded p-4\">\n                  <h3 className=\"text-lg font-semibold text-white mb-3 capitalize\">\n                    {featureType.replace('_', ' ')}\n                  </h3>\n                  <div className=\"space-y-2\">\n                    {changes.map((change: any, idx: number) => (\n                      <div\n                        key={idx}\n                        className={`p-3 rounded ${\n                          change.changeType === 'added'\n                            ? 'bg-green-900/20 border border-green-600'\n                            : change.changeType === 'deleted'\n                            ? 'bg-red-900/20 border border-red-600'\n                            : 'bg-yellow-900/20 border border-yellow-600'\n                        }`}\n                      >\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <span className={`px-2 py-1 text-xs rounded ${\n                            change.changeType === 'added'\n                              ? 'bg-green-600 text-white'\n                              : change.changeType === 'deleted'\n                              ? 'bg-red-600 text-white'\n                              : 'bg-yellow-600 text-white'\n                          }`}>\n                            {change.changeType.toUpperCase()}\n                          </span>\n                          <span className=\"text-white font-medium\">{change.itemLabel || change.itemKey}</span>\n                        </div>\n                        {change.changeType === 'changed' && (\n                          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                            <div>\n                              <div className=\"text-gray-400 mb-1\">Old Value</div>\n                              <div className=\"text-red-300 break-all font-mono text-xs\">\n                                {JSON.stringify(change.oldValue, null, 2)}\n                              </div>\n                            </div>\n                            <div>\n                              <div className=\"text-gray-400 mb-1\">New Value</div>\n                              <div className=\"text-green-300 break-all font-mono text-xs\">\n                                {JSON.stringify(change.newValue, null, 2)}\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                        {change.changeType === 'added' && (\n                          <div className=\"text-sm\">\n                            <div className=\"text-gray-400 mb-1\">Value</div>\n                            <div className=\"text-green-300 break-all font-mono text-xs\">\n                              {JSON.stringify(change.newValue, null, 2)}\n                            </div>\n                          </div>\n                        )}\n                        {change.changeType === 'deleted' && (\n                          <div className=\"text-sm\">\n                            <div className=\"text-gray-400 mb-1\">Value</div>\n                            <div className=\"text-red-300 break-all font-mono text-xs\">\n                              {JSON.stringify(change.oldValue, null, 2)}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                    {changes.length === 0 && (\n                      <div className=\"text-gray-400 text-sm\">No changes</div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}}]
}