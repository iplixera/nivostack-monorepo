{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/karim-f/Code/nivostack-monorepo-checkout/dashboard/src/components/ExperimentsTab.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { api } from '@/lib/api'\n\ninterface Experiment {\n  id: string\n  name: string\n  description: string | null\n  status: string\n  variants: Array<{ value: any; weight: number; name: string }>\n  targetingRules: any\n  startDate: string | null\n  endDate: string | null\n  createdAt: string\n  config: { key: string; label: string | null }\n  _count: { assignments: number; events: number }\n}\n\ninterface ExperimentsTabProps {\n  projectId: string\n  token: string\n}\n\nexport default function ExperimentsTab({ projectId, token }: ExperimentsTabProps) {\n  const [experiments, setExperiments] = useState<Experiment[]>([])\n  const [loading, setLoading] = useState(true)\n  const [showCreateForm, setShowCreateForm] = useState(false)\n  const [selectedExperiment, setSelectedExperiment] = useState<Experiment | null>(null)\n  const [showResults, setShowResults] = useState(false)\n  const [results, setResults] = useState<any>(null)\n  const [statusFilter, setStatusFilter] = useState<string>('all')\n\n  useEffect(() => {\n    loadExperiments()\n  }, [statusFilter])\n\n  const loadExperiments = async () => {\n    try {\n      setLoading(true)\n      const data = await api.experiments.list(\n        projectId,\n        statusFilter === 'all' ? undefined : statusFilter,\n        token\n      )\n      setExperiments(data.experiments)\n    } catch (error) {\n      console.error('Failed to load experiments:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadResults = async (experimentId: string) => {\n    try {\n      const data = await api.experiments.getResults(experimentId, token)\n      setResults(data)\n      setShowResults(true)\n    } catch (error) {\n      alert('Failed to load results: ' + (error instanceof Error ? error.message : 'Unknown error'))\n    }\n  }\n\n  const handleStartExperiment = async (experimentId: string) => {\n    try {\n      await api.experiments.update(experimentId, { status: 'running' }, token)\n      await loadExperiments()\n    } catch (error) {\n      alert('Failed to start experiment: ' + (error instanceof Error ? error.message : 'Unknown error'))\n    }\n  }\n\n  const handleStopExperiment = async (experimentId: string) => {\n    try {\n      await api.experiments.update(experimentId, { status: 'completed' }, token)\n      await loadExperiments()\n    } catch (error) {\n      alert('Failed to stop experiment: ' + (error instanceof Error ? error.message : 'Unknown error'))\n    }\n  }\n\n  const handleDeleteExperiment = async (experimentId: string) => {\n    if (!confirm('Are you sure you want to delete this experiment?')) return\n    try {\n      await api.experiments.delete(experimentId, token)\n      await loadExperiments()\n    } catch (error) {\n      alert('Failed to delete experiment: ' + (error instanceof Error ? error.message : 'Unknown error'))\n    }\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'running': return 'bg-green-600/20 text-green-400'\n      case 'paused': return 'bg-yellow-600/20 text-yellow-400'\n      case 'completed': return 'bg-gray-600/20 text-gray-400'\n      default: return 'bg-blue-600/20 text-blue-400'\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-gray-400\">Loading experiments...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-bold text-white\">A/B Testing Experiments</h2>\n          <p className=\"text-gray-400 text-sm mt-1\">Create and manage A/B tests for your configs</p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <select\n            value={statusFilter}\n            onChange={(e) => setStatusFilter(e.target.value)}\n            className=\"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm\"\n          >\n            <option value=\"all\">All Status</option>\n            <option value=\"draft\">Draft</option>\n            <option value=\"running\">Running</option>\n            <option value=\"paused\">Paused</option>\n            <option value=\"completed\">Completed</option>\n          </select>\n          <button\n            onClick={() => setShowCreateForm(true)}\n            className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors\"\n          >\n            + Create Experiment\n          </button>\n        </div>\n      </div>\n\n      {experiments.length === 0 ? (\n        <div className=\"bg-gray-900 rounded-lg p-8 text-center border border-gray-800\">\n          <p className=\"text-gray-400 mb-4\">No experiments yet</p>\n          <button\n            onClick={() => setShowCreateForm(true)}\n            className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors\"\n          >\n            Create Your First Experiment\n          </button>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {experiments.map((experiment) => (\n            <div key={experiment.id} className=\"bg-gray-900 rounded-lg p-4 border border-gray-800\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <h3 className=\"text-white font-medium\">{experiment.name}</h3>\n                    <span className={`px-2 py-0.5 rounded text-xs font-medium ${getStatusColor(experiment.status)}`}>\n                      {experiment.status}\n                    </span>\n                    <code className=\"text-gray-400 text-xs bg-gray-800 px-2 py-0.5 rounded\">\n                      {experiment.config.key}\n                    </code>\n                  </div>\n                  {experiment.description && (\n                    <p className=\"text-gray-400 text-sm mb-2\">{experiment.description}</p>\n                  )}\n                  <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                    <span>{experiment._count.assignments} assignments</span>\n                    <span>{experiment._count.events} events</span>\n                    {experiment.startDate && (\n                      <span>Started: {new Date(experiment.startDate).toLocaleDateString()}</span>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  {experiment.status === 'running' && (\n                    <>\n                      <button\n                        onClick={() => loadResults(experiment.id)}\n                        className=\"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors\"\n                      >\n                        View Results\n                      </button>\n                      <button\n                        onClick={() => handleStopExperiment(experiment.id)}\n                        className=\"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg transition-colors\"\n                      >\n                        Stop\n                      </button>\n                    </>\n                  )}\n                  {experiment.status === 'draft' && (\n                    <button\n                      onClick={() => handleStartExperiment(experiment.id)}\n                      className=\"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors\"\n                    >\n                      Start\n                    </button>\n                  )}\n                  <button\n                    onClick={() => handleDeleteExperiment(experiment.id)}\n                    className=\"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg transition-colors\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n\n              {/* Variants */}\n              <div className=\"mt-4 pt-4 border-t border-gray-800\">\n                <p className=\"text-xs text-gray-400 mb-2\">Variants:</p>\n                <div className=\"flex flex-wrap gap-2\">\n                  {experiment.variants.map((variant, idx) => (\n                    <div\n                      key={idx}\n                      className=\"bg-gray-800 rounded-lg px-3 py-2 border border-gray-700\"\n                    >\n                      <div className=\"text-white text-sm font-medium\">{variant.name}</div>\n                      <div className=\"text-gray-400 text-xs mt-1\">\n                        {variant.weight}% • {typeof variant.value === 'object' ? JSON.stringify(variant.value) : String(variant.value)}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Create Experiment Form */}\n      {showCreateForm && (\n        <ExperimentForm\n          projectId={projectId}\n          token={token}\n          onClose={() => {\n            setShowCreateForm(false)\n            loadExperiments()\n          }}\n        />\n      )}\n\n      {/* Results Modal */}\n      {showResults && results && (\n        <ExperimentResults\n          results={results}\n          onClose={() => {\n            setShowResults(false)\n            setResults(null)\n          }}\n        />\n      )}\n    </div>\n  )\n}\n\n// Experiment Form Component\nfunction ExperimentForm({\n  projectId,\n  token,\n  onClose\n}: {\n  projectId: string\n  token: string\n  onClose: () => void\n}) {\n  const [configs, setConfigs] = useState<any[]>([])\n  const [formData, setFormData] = useState({\n    configId: '',\n    name: '',\n    description: '',\n    variants: [{ name: 'Control', value: '', weight: 50 }, { name: 'Variant A', value: '', weight: 50 }],\n    assignmentType: 'consistent' as 'random' | 'consistent' | 'targeting'\n  })\n  const [saving, setSaving] = useState(false)\n\n  useEffect(() => {\n    loadConfigs()\n  }, [])\n\n  const loadConfigs = async () => {\n    try {\n      const data = await api.businessConfig.list(projectId, token)\n      setConfigs(data.configs)\n    } catch (error) {\n      console.error('Failed to load configs:', error)\n    }\n  }\n\n  const handleAddVariant = () => {\n    setFormData(prev => ({\n      ...prev,\n      variants: [...prev.variants, { name: `Variant ${prev.variants.length}`, value: '', weight: 0 }]\n    }))\n  }\n\n  const handleRemoveVariant = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      variants: prev.variants.filter((_, i) => i !== index)\n    }))\n  }\n\n  const handleVariantChange = (index: number, field: string, value: any) => {\n    setFormData(prev => ({\n      ...prev,\n      variants: prev.variants.map((v, i) => \n        i === index ? { ...v, [field]: value } : v\n      )\n    }))\n  }\n\n  const normalizeWeights = () => {\n    const totalWeight = formData.variants.reduce((sum, v) => sum + (v.weight || 0), 0)\n    if (totalWeight === 0) {\n      // Distribute evenly\n      const weightPerVariant = 100 / formData.variants.length\n      setFormData(prev => ({\n        ...prev,\n        variants: prev.variants.map(v => ({ ...v, weight: weightPerVariant }))\n      }))\n    } else {\n      // Normalize to 100\n      setFormData(prev => ({\n        ...prev,\n        variants: prev.variants.map(v => ({ ...v, weight: (v.weight / totalWeight) * 100 }))\n      }))\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    // Normalize weights\n    normalizeWeights()\n    \n    setSaving(true)\n    try {\n      await api.experiments.create({\n        projectId,\n        configId: formData.configId,\n        name: formData.name,\n        description: formData.description || undefined,\n        variants: formData.variants.map(v => ({\n          ...v,\n          weight: v.weight || 0\n        })),\n        assignmentType: formData.assignmentType\n      }, token)\n      onClose()\n    } catch (error) {\n      alert('Failed to create experiment: ' + (error instanceof Error ? error.message : 'Unknown error'))\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const selectedConfig = configs.find(c => c.id === formData.configId)\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-gray-900 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto border border-gray-800\">\n        <div className=\"p-6 border-b border-gray-800\">\n          <h3 className=\"text-xl font-semibold text-white\">Create Experiment</h3>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">Config</label>\n            <select\n              value={formData.configId}\n              onChange={(e) => setFormData(prev => ({ ...prev, configId: e.target.value }))}\n              className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white\"\n              required\n            >\n              <option value=\"\">Select a config...</option>\n              {configs.map(config => (\n                <option key={config.id} value={config.id}>\n                  {config.label || config.key} ({config.key})\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">Experiment Name</label>\n            <input\n              type=\"text\"\n              value={formData.name}\n              onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n              className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white\"\n              placeholder=\"e.g., Button Color Test\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">Description</label>\n            <textarea\n              value={formData.description}\n              onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n              className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white\"\n              rows={3}\n              placeholder=\"What are you testing?\"\n            />\n          </div>\n\n          <div>\n            <div className=\"flex items-center justify-between mb-2\">\n              <label className=\"block text-sm font-medium text-gray-300\">Variants</label>\n              <button\n                type=\"button\"\n                onClick={handleAddVariant}\n                className=\"text-sm text-blue-400 hover:text-blue-300\"\n              >\n                + Add Variant\n              </button>\n            </div>\n            <div className=\"space-y-3\">\n              {formData.variants.map((variant, index) => (\n                <div key={index} className=\"bg-gray-800 rounded-lg p-4 border border-gray-700\">\n                  <div className=\"grid grid-cols-3 gap-3 mb-3\">\n                    <div>\n                      <label className=\"block text-xs text-gray-400 mb-1\">Name</label>\n                      <input\n                        type=\"text\"\n                        value={variant.name}\n                        onChange={(e) => handleVariantChange(index, 'name', e.target.value)}\n                        className=\"w-full bg-gray-700 border border-gray-600 rounded-lg px-2 py-1.5 text-white text-sm\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-400 mb-1\">Value</label>\n                      <input\n                        type=\"text\"\n                        value={variant.value}\n                        onChange={(e) => handleVariantChange(index, 'value', e.target.value)}\n                        className=\"w-full bg-gray-700 border border-gray-600 rounded-lg px-2 py-1.5 text-white text-sm\"\n                        placeholder={selectedConfig?.valueType === 'boolean' ? 'true/false' : 'value'}\n                        required\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-gray-400 mb-1\">Weight (%)</label>\n                      <div className=\"flex items-center gap-2\">\n                        <input\n                          type=\"number\"\n                          min=\"0\"\n                          max=\"100\"\n                          value={variant.weight}\n                          onChange={(e) => handleVariantChange(index, 'weight', parseFloat(e.target.value) || 0)}\n                          className=\"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-2 py-1.5 text-white text-sm\"\n                          required\n                        />\n                        {formData.variants.length > 1 && (\n                          <button\n                            type=\"button\"\n                            onClick={() => handleRemoveVariant(index)}\n                            className=\"text-red-400 hover:text-red-300 p-1\"\n                          >\n                            ×\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n            <button\n              type=\"button\"\n              onClick={normalizeWeights}\n              className=\"mt-2 text-sm text-blue-400 hover:text-blue-300\"\n            >\n              Normalize weights to 100%\n            </button>\n          </div>\n\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-800\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-400 hover:text-white transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              {saving ? 'Creating...' : 'Create Experiment'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\n// Experiment Results Component\nfunction ExperimentResults({\n  results,\n  onClose\n}: {\n  results: any\n  onClose: () => void\n}) {\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-gray-900 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto border border-gray-800\">\n        <div className=\"p-6 border-b border-gray-800\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-semibold text-white\">Experiment Results</h3>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-white transition-colors\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          <div>\n            <h4 className=\"text-white font-medium mb-2\">{results.experiment.name}</h4>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"bg-gray-800 rounded-lg p-4\">\n                <div className=\"text-gray-400 text-xs mb-1\">Total Assignments</div>\n                <div className=\"text-white text-2xl font-bold\">{results.stats.totalAssignments}</div>\n              </div>\n              <div className=\"bg-gray-800 rounded-lg p-4\">\n                <div className=\"text-gray-400 text-xs mb-1\">Total Conversions</div>\n                <div className=\"text-white text-2xl font-bold\">{results.stats.totalConversions}</div>\n              </div>\n              <div className=\"bg-gray-800 rounded-lg p-4\">\n                <div className=\"text-gray-400 text-xs mb-1\">Overall Conversion Rate</div>\n                <div className=\"text-white text-2xl font-bold\">\n                  {(results.stats.overallConversionRate * 100).toFixed(2)}%\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <h4 className=\"text-white font-medium mb-4\">Variant Performance</h4>\n            <div className=\"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden\">\n              <table className=\"w-full\">\n                <thead className=\"bg-gray-700/50\">\n                  <tr>\n                    <th className=\"text-left px-4 py-3 text-gray-300 text-sm font-medium\">Variant</th>\n                    <th className=\"text-right px-4 py-3 text-gray-300 text-sm font-medium\">Assignments</th>\n                    <th className=\"text-right px-4 py-3 text-gray-300 text-sm font-medium\">Conversions</th>\n                    <th className=\"text-right px-4 py-3 text-gray-300 text-sm font-medium\">Conversion Rate</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {results.stats.variants.map((variant: any, index: number) => (\n                    <tr key={index} className=\"border-t border-gray-700\">\n                      <td className=\"px-4 py-3 text-white text-sm\">\n                        {results.experiment.variants[index]?.name || `Variant ${index}`}\n                      </td>\n                      <td className=\"px-4 py-3 text-gray-300 text-sm text-right\">{variant.assignments}</td>\n                      <td className=\"px-4 py-3 text-gray-300 text-sm text-right\">{variant.conversions}</td>\n                      <td className=\"px-4 py-3 text-gray-300 text-sm text-right\">\n                        {(variant.conversionRate * 100).toFixed(2)}%\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          {results.significance && results.significance.length > 0 && (\n            <div>\n              <h4 className=\"text-white font-medium mb-4\">Statistical Significance</h4>\n              <div className=\"space-y-2\">\n                {results.significance.map((sig: any, index: number) => (\n                  <div key={index} className=\"bg-gray-800 rounded-lg p-4 border border-gray-700\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-white text-sm\">\n                        Variant {sig.variantA} vs Variant {sig.variantB}\n                      </span>\n                      <div className=\"flex items-center gap-3\">\n                        <span className={`px-2 py-1 rounded text-xs ${\n                          sig.significant\n                            ? 'bg-green-600/20 text-green-400'\n                            : 'bg-gray-600/20 text-gray-400'\n                        }`}>\n                          {sig.significant ? 'Significant' : 'Not Significant'}\n                        </span>\n                        <span className=\"text-gray-400 text-xs\">\n                          {sig.confidence}% confidence\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":"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"}}]
}